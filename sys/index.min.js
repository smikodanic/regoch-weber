var U=Object.defineProperty;var O=(r,i)=>U(r,"name",{value:i,configurable:!0});(()=>{"use strict";var __webpack_modules__={632:(r,i,n)=>{n.d(i,{Z:()=>a});class l{constructor(){this.activeOns=[]}emit(f,p={}){const E=new CustomEvent(f,{detail:p});window.dispatchEvent(E)}on(f,p){const E=O(g=>{p.call(null,g)},"listenerWindow");this._removeOne(f,p),this.activeOns.push({eventName:f,listener:p,listenerWindow:E}),window.addEventListener(f,E)}once(f,p){const E=O(g=>{p.call(null,g),this._removeOne(f,p,E)},"listenerWindow");window.addEventListener(f,E,{once:!0})}off(f,p){this._removeOne(f,p)}offAll(f){let p=0;for(const E of this.activeOns)E.eventName===f&&(window.removeEventListener(E.eventName,E.listenerWindow),this.activeOns.splice(p,1)),p++}getListeners(){return{...this.activeOns}}_removeOne(f,p){if(!p)throw new Error("eventEmitter._removeOne Error: listener is not defined");let E=0;for(const g of this.activeOns)g.eventName===f&&g.listener.toString()===p.toString()&&(window.removeEventListener(g.eventName,g.listenerWindow),this.activeOns.splice(E,1)),E++}}O(l,"EventEmitter");const a=new l},719:(r,i,n)=>{n.d(i,{Z:()=>_});var l=n(632);class c{constructor(){this.previous={uri:"",ctrl:null},this.current={uri:"",ctrl:null}}setPrevious(){this.previous={...this.current}}setCurrent(p){const E=this.getCurrentURI();this.current={uri:E,ctrl:p}}getPrevioustURI(){return this.previous.uri}getCurrentURI(){return window.location.pathname+window.location.search}async resetPreviousController(p){const E=this.previous.ctrl;if(E){await E.destroy(p),E.rgKILL(),E.emptyModel();const g=Object.keys(E);for(const u of g)u!=="$debugOpts"&&u!=="$fridge"&&u!=="$model"&&u!=="$modeler"&&u!=="$navig"&&u!=="$rg"&&u!=="$httpClient"&&u!=="$baseURIhost"&&u!=="$auth"&&delete E[u]}}goto(p,E,g){if(!p)throw new Error('The argument "url" is not defined');E||(E={}),g||(g=""),E={...E,url:p},window.history.pushState(E,g,p),l.Z.emit("pushstate",E)}goblind(p,E,g){if(!p)throw new Error('The argument "url" is not defined');E||(E={}),g||(g=""),E={...E,url:p},window.history.pushState(E,g,p)}forward(){window.history.forward()}back(){window.history.back()}go(p){window.history.go(p)}reload(){window.location.reload()}onPushstate(p){l.Z.on("pushstate",p)}onPopstate(p){window.addEventListener("popstate",p)}onUrlChange(p){this.onPushstate(p),this.onPopstate(p)}onHashchange(p){window.addEventListener("hashchange",p)}}O(c,"Navig");const _=new c},835:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});class Aux{_getControllerValue(r){r=this._solveInterpolated(r),r=this._solveMath(r);const i=r.split("."),n=i[0];let l=this[n];return i.forEach((c,a)=>{a!==0&&l!=null&&(l=l[c])}),l}_setControllerValue(r,i){const n=r.split(".");let l=1,c=this;for(const a of n)l!==n.length?(c[a]===void 0&&(c[a]={}),c=c[a]):c[a]=i,l++}_getModelValue(r){const i="$model."+r;return this._getControllerValue(i)}_setModelValue(r,i){const n=r.split("."),l=n.shift();if(n.length===0)this.$model[l]=i;else if(n.length===1){const c=n[0],a=this.$model[l]||{};a[c]=i,this.$model[l]=a}else if(n.length===2){const c=n[0],a=n[1],_=this.$model[l]||{};_[c]=_[c]||{},_[c][a]=i,this.$model[l]=_}else if(n.length===3){const c=n[0],a=n[1],_=n[2],f=this.$model[l]||{};f[c]=f[c]||{},f[c][a]=f[c][a]||{},f[c][a][_]=i,this.$model[l]=f}else if(n.length===4){const c=n[0],a=n[1],_=n[2],f=n[3],p=this.$model[l]||{};p[c]=p[c]||{},p[c][a]=p[c][a]||{},p[c][a][_]=p[c][a][_]||{},p[c][a][_][f]=i,this.$model[l]=p}else if(n.length===5){const c=n[0],a=n[1],_=n[2],f=n[3],p=n[4],E=this.$model[l]||{};E[c]=E[c]||{},E[c][a]=E[c][a]||{},E[c][a][_]=E[c][a][_]||{},E[c][a][_][f]=E[c][a][_][f]||{},E[c][a][_][f][p]=i,this.$model[l]=E}}_solve_$i(r,i,n){let l;return!n||n==="0"?l=new RegExp("\\$i0|\\$i","g"):l=new RegExp(`\\$i${n}`,"g"),i=i.replace(l,r),i}_solveInterpolated(r){const i="{{",n="}}",l=new RegExp(`${i}\\s*${this.$rg.varnameChars}\\s*${n}`,"g"),c=r.match(l)||[];for(const a of c){const _=a.replace(i,"").replace(n,"").trim();let f=this._getControllerValue(_);f===void 0&&(this._debug("warnings",`_solveInterpolatedWarn:: Controller property ${_} is undefined.`,"Maroon","LightYellow"),f=""),r=r.replace(a,f),l.test(r)&&(r=this._solveInterpolated(r))}return r}_solveMath(txt){const reg=/solveMath\/[\d\+\-\*\/\%\(\)\s]+\//g,evs=txt.match(reg);if(!evs)return txt;for(const ev of evs){const reg2=/solveMath\/([\d\+\-\*\/\%\(\)\s]+)\//,expression=ev.match(reg2)[1],result=eval(expression);txt=txt.replace(reg2,result)}return txt}_calcComparison_A(attrVal){const reg=new RegExp(`\\$model\\.${this.$rg.varnameChars}|this\\.${this.$rg.varnameChars}`,"g"),props=attrVal.match(reg)||[];let expression=attrVal;for(const r of props){const i=r.trim().replace(/^this\./,"");let n=this._getControllerValue(i);typeof n=="string"&&(n=`'${n}'`),expression=expression.replace(r,n)}let tf=!1;try{tf=eval(expression)}catch(r){console.error(`Bad expression "${attrVal}" --> ${expression}`)}return tf}_calcComparison_B(r){const i=r.split(/\s+\$/),n=i[0].trim().replace(/^this\./,""),l=this._getControllerValue(n),c=i[1]?"$"+i[1].trim():void 0,{funcName:a,funcArgs:_}=this._funcParse(c),f=!!_&&!!_.length?_[0]:void 0;let p=!!l;return a==="$not"?p=!l:a==="$eq"?p=l===f:a==="$ne"?p=l!==f:a==="$gt"?p=typeof l=="number"?l>f:!1:a==="$gte"?p=typeof l=="number"?l>=f:!1:a==="$lt"?p=typeof l=="number"?l<f:!1:a==="$lte"?p=typeof l=="number"?l<=f:!1:a==="$in"&&!!f?p=f.indexOf(l)!==-1:a==="$nin"&&!!f?p=f.indexOf(l)===-1:a==="$reg"&&!!f?p=l!==void 0?f.test(l):!1:a==="$nreg"&&!!f&&(p=l!==void 0?!f.test(l):!1),p}_assignmentExe(r,i,n){try{const l=r.split("="),c=l[0].trim();let a=l[1].trim().replace(/\'|\"|\`/g,"");const _=new RegExp(this.$rg.varnameChars,"");if(/^\$element/.test(a)){const f=a.split(".")[1]||"value";a=i[f]}else if(/^\$event/.test(a)){const f=a.split(".")[1]||"type";a=n[f]}else/^\$model/.test(a)?(a=a.replace("$model.",""),a=this._getModelValue(a)):/^this\./.test(a)?(a=a.replace("this.",""),a=this._getControllerValue(a)):a=a;this._setControllerValue(c,a)}catch(l){console.error(l)}}_funcParse(r,i,n){if(!r)return{};const l=r.match(/^(.+)\((.*)\)$/);if(!l)return console.error(`_funcParseErr: Function "${r}" has bad definition.`),{};const c=l[1]||"",a=l[2]?l[2].trim():"",_=a?a.split(",").map(f=>{if(f=f.trim(),f==="$element")f=i;else if(f==="$value")f=this._getElementValue(i,!0);else if(f==="$event")f=n;else if(/"|'/.test(f))f=f.replace(/\'/g,"");else if(/^-?\d+\.?\d*$/.test(f)&&!/\'/.test(f))f=+f;else if(f==="true"||f==="false")f=JSON.parse(f);else if(/^\/.+\/i?g?$/.test(f)){const p=f.match(/^\/(.+)\/(i?g?)$/);f=new RegExp(p[1],p[2])}else if(/^this\./.test(f)){const p=f.replace(/^this\./,"");f=this._getControllerValue(p)}else if(/^\$model\./.test(f)){const p=f.replace(/^\$model\./,"");f=this._getModelValue(p)}return f}):[];return{funcName:c,funcArgs:_,funcArgsStr:a}}async _funcExe(r,i){try{if(/\./.test(r)){const n=r.split(".");let l=this;for(const c of n)l=l[c];await l(...i)}else{if(!this[r])throw new Error(`Method "${r}" is not defined in the "${this.constructor.name}" controller.`);await this[r](...i)}}catch(n){console.error(n)}}async _funcsExe(r,i,n){if(/\w\s*\=\s*[a-zA-z0-9\'\"\$]+/.test(r)){const a=r;this._assignmentExe(a,i,n);return}const c=r.split(";").filter(a=>!!a).map(a=>a.trim());for(const a of c){const{funcName:_,funcArgs:f}=this._funcParse(a,i,n);await this._funcExe(_,f)}}_genElem_create(r,i,n){r.style.display="none";let l=this._uid();const c=r.getAttribute(`${i}-id`);c?l=c:r.setAttribute(`${i}-id`,l);const a=r.cloneNode(!0);return a.removeAttribute(i),a.setAttribute(`${i}-gen`,n),a.setAttribute(`${i}-id`,l),a.style.display="",r.parentNode.insertBefore(a,r.nextSibling),a}_genElem_remove(r,i,n){const l=r.getAttribute(`${i}-id`),c=`[${i}-gen="${n}"][${i}-id="${l}"]`,a=document.querySelectorAll(c);for(const _ of a)_.remove()}_setElementValue(r,i=""){typeof i=="object"&&(r.type==="textarea"?i=JSON.stringify(i,null,2):i=JSON.stringify(i)),r.value=i,r.setAttribute("value",i)}_getElementValue(r,i=!0){let n;if(r.type==="checkbox"){const l=document.querySelectorAll(`[name="${r.name}"]`),c=[];let a=1;for(const _ of l){let f=_.value;i&&(f=this._typeConvertor(_.value)),_.checked&&(c.push(f),n=c),a===l.length&&!n&&(n=[]),a++}}else if(r.type==="select-multiple"){const l=r.selectedOptions,c=[];let a=1;for(const _ of l){let f=_.value;i&&(f=this._typeConvertor(_.value)),c.push(f),n=c,a===l.length&&!n&&(n=[]),a++}}else if(r.type==="radio"){let l=r.value;i&&(l=this._typeConvertor(r.value)),r.checked&&(n=l)}else if(r.type==="number")n=r.valueAsNumber;else if(r.type==="password")n=r.value;else if(r.type==="file"&&r.multiple)n=r.files;else if(r.type==="file")n=r.files[0];else{let l=r.value;i&&(l=this._typeConvertor(r.value)),n=l}return n}_removeParentElements(r,i){let n=document.querySelectorAll(`[${r}]`);if(!!i&&typeof i=="string")n=document.querySelectorAll(`[${r}^="${i}"]`);else if(!!i&&i instanceof RegExp){const l=[];for(const c of n){const a=c.getAttribute(r);i.test(a)&&l.push(c)}n=l}for(const l of n){const c=l.parentNode;c.hasAttribute(`${r}-gen`)&&c.remove()}}_listElements(r,i){let n=document.querySelectorAll(`[${r}]`);if(!!i&&typeof i=="string")n=document.querySelectorAll(`[${r}^="${i}"]`);else if(!!i&&i instanceof RegExp){const l=[];for(const c of n){const a=c.getAttribute(r);i.test(a)&&l.push(c)}n=l}return n}_sortElementsByPriority(r,i){const n=O(c=>{const _=c.getAttribute(i).split(this.$rg.separator);return+(_[1]?_[1].trim():0)},"getPriority");let l=[];for(const c of r){const a=n(c);l.push({elem:c,priority:a})}return l=l.sort((c,a)=>{const _=c.priority;return a.priority-_}),r=l.map(c=>c.elem),r}_typeConvertor(r){function i(n){try{JSON.parse(n)}catch{return!1}return!0}return O(i,"isJSON"),!!r&&!isNaN(r)&&!/\./.test(r)?r=parseInt(r,10):!!r&&!isNaN(r)&&/\./.test(r)?r=parseFloat(r):(r==="true"||r==="false"||i(r))&&(r=JSON.parse(r)),r}_uid(){const i=(Date.now()/1e3+"").split(".")[1],n=Math.round(Math.random()*1e3);return i+"-"+n}_debug(r,i,n,l){return this.$debugOpts[r]&&console.log(`%c ${i}`,`color: ${n}; background: ${l}`),this.$debugOpts}_printError(r){const i=r.message,n=r.stack.replace(/\n/g,"<br>");document.body.innerHTML=`
      <div style="margin:0px 13px;">
        <h5 style="color:Gray">Page Error</h5>
        <b style="color:Red;font:14px Verdana;">${i}</b>
        <br><span style="color:Gray;font:12px Verdana;">${n}</span>
      </div>
    `,console.error(r)}}O(Aux,"Aux");const __WEBPACK_DEFAULT_EXPORT__=Aux},242:(r,i,n)=>{n.d(i,{Z:()=>p});var l=n(835),c=n(719);class a extends l.Z{constructor(){super()}async rgKILL(){this._debug("rgKILL",`------- rgKILL (start) ctrl: ${this.constructor.name} -------`,"orange","#FFD8B6");const g=[];let u=1;for(const d of this.$rg.listeners)d.elem.removeEventListener(d.eventName,d.handler),this._debug("rgKILL",`${u}. killed:: ${d.attrName} --- ${d.eventName} --- ${d.elem.localName} -- ${d.elem.innerHTML} -- ctrl:: ${this.constructor.name}`,"orange"),g.push(Promise.resolve(!0)),u++;await Promise.all(g),this.$rg.listeners=[],this._debug("rgKILL","------- rgKILL (end) -------","orange","#FFD8B6")}rgHref(){this._debug("rgHref","--------- rgHref ------","orange","#F4EA9E");const g="data-rg-href",u=this._listElements(g,"");if(this._debug("rgHref",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=O(async $=>{$.preventDefault();const C=d.getAttribute("data-rg-href")||d.getAttribute("href")||"",A=C.trim(),k={href:C},v=d.innerText?d.innerText.trim():"";A&&c.Z.goto(A,k,v),this._debug("rgHref",`Executed rgHref listener -->  href: ${C}, ctrl:: ${this.constructor.name}`,"orangered")},"handler"),m="click";d.addEventListener(m,h),this.$rg.listeners.push({attrName:g,elem:d,handler:h,eventName:m}),this._debug("rgHref",`pushed::  tag: ${d.localName} | href="${d.pathname}" | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgClick(){this._debug("rgClick","--------- rgClick ------","orange","#F4EA9E");const g="data-rg-click",u=this._listElements(g,"");if(this._debug("rgClick",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=d.getAttribute(g);if(!h){console.error(`Attribute "data-rg-click" has bad definition (data-rg-click="${h}").`);continue}const m=h.split(this.$rg.separator),$=m[0],C=!!m[1]&&m[1].trim()==="preventDefault",A=O(async v=>{C&&v.preventDefault(),await this._funcsExe($,d,v),this._debug("rgClick",`Executed rgClick listener --> ${$} | preventDefault: ${C}`,"orangered")},"handler"),k="click";d.addEventListener(k,A),this.$rg.listeners.push({attrName:g,elem:d,handler:A,eventName:k}),this._debug("rgClick",`pushed::  tag: ${d.localName} | data-rg-click="${h}" | preventDefault: ${C} | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgKeyup(){this._debug("rgKeyup","--------- rgKeyup ------","orange","#F4EA9E");const g="data-rg-keyup",u=this._listElements(g,"");if(this._debug("rgKeyup",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=d.getAttribute(g),m=h.split(this.$rg.separator);if(!m[0]){console.error(`Attribute "data-rg-keyup" has bad definition (data-rg-keyup="${h}").`);continue}const $=m[0];let C=m[1]||"";C=C.trim().toLowerCase();const A=O(async v=>{let L;v.code&&(L=v.code.toLowerCase()),!(!!C&&C!==L)&&(await this._funcsExe($,d,v),this._debug("rgKeyup",`Executed rgKeyup listener --> ${$} | eventCode: ${L}`,"orangered"))},"handler"),k="keyup";d.addEventListener(k,A),this.$rg.listeners.push({attrName:g,elem:d,handler:A,eventName:k}),this._debug("rgKeyup",`pushed::  tag: ${d.localName} | data-rg-keyup="${h}" | ctrl="${this.constructor.name}" | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgChange(){this._debug("rgChange","--------- rgChange ------","orange","#F4EA9E");const g="data-rg-change",u=this._listElements(g,"");if(this._debug("rgChange",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=d.getAttribute(g);if(!h){console.error(`Attribute "data-rg-change" has bad definition (data-rg-change="${h}").`);continue}const m=h,$=O(async A=>{await this._funcsExe(m,d,A),this._debug("rgChange",`Executed rgChange listener --> ${m}`,"orangered")},"handler"),C="change";d.addEventListener(C,$),this.$rg.listeners.push({attrName:g,elem:d,handler:$,eventName:C}),this._debug("rgChange",`pushed::  tag: ${d.localName} | data-rg-change="${h}" | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgEvt(){this._debug("rgEvt","--------- rgEvt ------","orange","#F4EA9E");const g="data-rg-evt",u=this._listElements(g,"");if(this._debug("rgEvt",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=d.getAttribute(g).trim(),m=h.split("&&");for(const $ of m){const C=$.split(this.$rg.separator);if(!C[0]||!C[1]){console.error(`Attribute "data-rg-evt" has bad definition (data-rg-evt="${h}").`);continue}const A=C[0].trim(),k=C[1],v=O(async L=>{await this._funcsExe(k,d,L),this._debug("rgEvt",`Executed rgEvt listener --> ${k}`,"orangered")},"handler");d.addEventListener(A,v),this.$rg.listeners.push({eventName:A,attrName:g,elem:d,handler:v,eventName:A}),this._debug("rgEvt",`pushed::  tag: ${d.localName} | data-rg-evt | event: ${A} | rgListeners: ${this.$rg.listeners.length}`,"orange")}}}rgSet(){this._debug("rgSet","--------- rgSet ------","orange","#F4EA9E");const g="data-rg-set",u=this._listElements(g,"");if(this._debug("rgSet",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=d.getAttribute(g);if(!h){console.error(`Attribute "data-rg-set" has bad definition (data-rg-set="${h}").`);continue}const m=h.split(this.$rg.separator),$=m[0].trim(),A=(m[1]?m[1].trim():"")!=="convertTypeDont",k=O(L=>{const x=this._getElementValue(d,A);this._setControllerValue($,x),this._debug("rgSet",`Executed rgSet listener --> controller property:: ${$} = ${x}`,"orangered")},"handler"),v="input";d.addEventListener(v,k),this.$rg.listeners.push({attrName:g,elem:d,handler:k,eventName:v}),this._debug("rgSet",`pushed::  <${d.localName} ${g}="${h}"> | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgModel(){this._debug("rgModel","--------- rgModel ------","orange","#F4EA9E");const g="data-rg-model",u=this._listElements(g,"");if(this._debug("rgModel",`found elements:: ${u.length}`,"orange"),!!u.length)for(const d of u){const h=d.getAttribute(g);if(!h){console.error(`Attribute "data-rg-model" has bad definition (data-rg-model="${h}").`);continue}const m=h.split(this.$rg.separator),$=m[0].replace("$model.","").trim(),A=(m[1]?m[1].trim():"")!=="convertTypeDont",k=this._getModelValue($);this._setElementValue(d,k),this._debug("rgModel",`rgModel set element value  --> controller property:: ${$} = ${k} | elem.type:: ${d.type}`,"orangered");const v=O(x=>{const M=this._getElementValue(d,A);this._setModelValue($,M),this._debug("rgModel",`Executed rgModel listener --> controller property:: ${$} = ${M}`,"orangered")},"handler"),L="input";d.addEventListener(L,v),this.$rg.listeners.push({attrName:g,elem:d,handler:v,eventName:L}),this._debug("rgModel",`rgModel listener -- pushed::  <${d.localName} ${g}="${h}"> -- rgListeners: ${this.$rg.listeners.length}`,"orange")}}}O(a,"DataRgListeners");const _=a;class f extends _{constructor(){super(),this.$rg={separator:"@@",elems:{},listeners:[],varnameChars:"[a-zA-Z\\d\\$\\_\\.]+"}}rgSetinitial(){this._debug("rgSetinitial","--------- rgSetinitial ------","navy","#B6ECFF");const g="data-rg-setinitial",u=this._listElements(g,"");if(this._debug("rgSetinitial",`found elements:: ${u.length}`,"navy"),!!u.length)for(const d of u){const h=d.getAttribute(g)||"";if(!h){console.error(`rgSetinitial Error:: Attribute has bad definition (data-rg-setinitial="${h}").`);continue}const m=h.split(this.$rg.separator),$=m[0].trim(),A=(m[1]?m[1].trim():"")!=="convertTypeDont",k=this._getElementValue(d,A);this._setControllerValue($,k),this._debug("rgSetinitial",`elem.type:: ${d.type} -- set initial --> ${$}:: ${k}`,"navy")}}rgFor(g){this._debug("rgFor","--------- rgFor (start) ------","navy","#B6ECFF");const u="data-rg-for";this._removeParentElements(u,g);let d=this._listElements(u,g);if(d=this._sortElementsByPriority(d,u),this._debug("rgFor",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u),$=m.split(this.$rg.separator),C=$[1]?$[1].trim():0,A=$[0].trim(),k=this._getControllerValue(A);if(this._genElem_remove(h,u,m),this._debug().rgFor&&console.log("rgFor -->","attrVal::",m," | val::",k," priority::",C),!k||!!k&&!k.length){h.style.display="none";continue}const v=this._genElem_create(h,u,m),L=k.length;for(let x=1;x<=L;x++){const M=L-x;h.parentNode.insertBefore(v,h.nextSibling);let R=this._solve_$i(M,v.outerHTML,C);R=this._solveInterpolated(R),R=this._solveMath(R),v.outerHTML=R}}this._debug("rgFor","--------- rgFor (end) ------","navy","#B6ECFF")}}rgRepeat(g){this._debug("rgRepeat","--------- rgRepeat (start) ------","navy","#B6ECFF");const u="data-rg-repeat",d=this._listElements(u,g);if(this._debug("rgRepeat",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u),$=m.trim(),C=+this._getControllerValue($);this._debug("rgRepeat",`Element will be repeated ${C} times.`,"navy"),this._genElem_remove(h,u,m);const A=this._genElem_create(h,u,m),k=+C;for(let v=1;v<=k;v++){const L=k-v;h.parentNode.insertBefore(A,h.nextSibling);let x=this._solve_$i(L,A.outerHTML);x=this._solveInterpolated(x),x=this._solveMath(x),A.outerHTML=x}}this._debug("rgRepeat","--------- rgRepeat (end) ------","navy","#B6ECFF")}}rgPrint(g){this._debug("rgPrint","--------- rgPrint (start) ------","navy","#B6ECFF");const u="data-rg-print",d=this._listElements(u,g);if(this._debug("rgPrint",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u),$=m.split(this.$rg.separator),C=$[0].trim(),A=C.split("|"),k=A[0].trim();let v=this._getControllerValue(k);const L=$[2]?$[2].trim()==="keep":!1;v===void 0?v=L?h.innerHTML:"":typeof v=="object"?v=JSON.stringify(v):typeof v=="number"?v=+v:typeof v=="string"?v=v:typeof v=="boolean"?v=v.toString():v=v;let x=A[1];if(!!x&&!!v){x=x.trim();const{funcName:V,funcArgs:N}=this._funcParse(x,h);typeof v[V]=="function"&&(v=v[V](...N))}let M=$[1]||"inner";M=M.trim(),this._genElem_remove(h,u,m);let R;if(M!=="inner"&&(R=this._genElem_create(h,u,m)),M==="inner")h.innerHTML=v;else if(M==="outer"){const V=R.getAttribute("data-rg-print-id");R.outerHTML=`<span data-rg-print-gen="${m}" data-rg-print-id="${V}">${v}</span>`}else if(M==="sibling"){h.style.display="";const V=R.getAttribute("data-rg-print-id");R.outerHTML=`<span data-rg-print-gen="${m}" data-rg-print-id="${V}">${v}</span>`}else M==="prepend"?R.innerHTML=v+" "+h.innerHTML:M==="append"?R.innerHTML=h.innerHTML+" "+v:M==="inset"?R.innerHTML=h.innerHTML.replace("{{}}",v):h.innerHTML=v;this._debug("rgPrint",`rgPrint:: ${C} = ${v} -- act::"${M}" -- toKeep::${L}`,"navy")}this._debug("rgPrint","--------- rgPrint (end) ------","navy","#B6ECFF")}}rgIf(g){this._debug("rgIf","--------- rgIf (start) ------","navy","#B6ECFF");const u="data-rg-if",d=this._listElements(u,g);if(this._debug("rgIf",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u).trim();if(!m){console.error(`Attribute "data-rg-if" has bad definition (data-rg-if="${m}").`);continue}let $=!1;if(/\!|<|>|=/.test(m)?$=this._calcComparison_A(m):$=this._calcComparison_B(m),$){const C=h.getAttribute("data-rg-print");!!C&&/outer|sibling|prepend|append|inset/.test(C)?h.style.display="none":h.style.display=""}else h.style.display="none";this._debug("rgIf",`rgIf:: <${h.tagName} data-rg-if="${m}"> => tf: ${$} -- outerHTML: ${h.outerHTML}`,"navy")}this._debug("rgIf","--------- rgIf (end) ------","navy","#B6ECFF")}}rgSpinner(g){this._debug("rgSpinner","--------- rgSpinner (start) ------","navy","#B6ECFF");const u="data-rg-spinner",d=this._listElements(u,g);if(this._debug("rgSpinner",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u).trim();if(!m){console.error(`Attribute "data-rg-spinner" has bad definition (data-rg-spinner="${m}").`);continue}let $=!1;if(/\!|<|>|=/.test(m)?$=this._calcComparison_A(m):$=this._calcComparison_B(m),$){const C=`
        <span data-rg-spinner-gen>
          <style scoped>
            [data-rg-spinner]>span:after {
              content: '';
              display: block;
              font-size: 10px;
              width: 1em;
              height: 1em;
              margin-top: -0.5em;
              animation: spinner 1500ms infinite linear;
              border-radius: 0.5em;
              box-shadow: #BEBEBE 1.5em 0 0 0, #BEBEBE 1.1em 1.1em 0 0, #BEBEBE 0 1.5em 0 0, #BEBEBE -1.1em 1.1em 0 0, #BEBEBE -1.5em 0 0 0, #BEBEBE -1.1em -1.1em 0 0, #BEBEBE 0 -1.5em 0 0, #BEBEBE 1.1em -1.1em 0 0;
            }
            @-webkit-keyframes spinner {
              0% { transform: rotate(0deg);}
              100% { transform: rotate(360deg); }
            }
            @-moz-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @-o-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        </span>
        `;h.insertAdjacentHTML("beforeend",C);const A=h.getBoundingClientRect(),k=h.querySelector("span[data-rg-spinner-gen]");k.style.position="relative";const v=A.width/2;k.style.left=v+"px";const L=A.height/2;k.style.top=L+"px",this._debug("rgSpinner",`spinner position:: x=${v}px , y=${L}px`,"navy")}else h.innerHTML="";this._debug("rgSpinner",`rgSpinner:: <${h.tagName} data-rg-spinner="${m}"> & val=(${typeof val}) ${val} => tf: ${$}`,"navy")}this._debug("rgSpinner","--------- rgSpinner (end) ------","navy","#B6ECFF")}}rgSwitch(g){this._debug("rgSwitch","--------- rgSwitch (start) ------","navy","#B6ECFF");const u="data-rg-switch",d=this._listElements(u,g);if(this._debug("rgSwitch",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u)||"",$=m.split(this.$rg.separator),C=$[1]?$[1].trim()==="multiple":!1,A=$[0].trim(),k=this._getControllerValue(A),v=h.querySelectorAll("[data-rg-switch] > [data-rg-switchcase]"),L=h.querySelector("[data-rg-switch] > [data-rg-switchdefault]");let x=!1;for(const M of v){let R=M.getAttribute("data-rg-switchcase");R=R.trim(),!C&&R===k||C&&k&&k.indexOf(R)!==-1?(M.style.display="",x=!0):M.style.display="none",this._debug("rgSwitch",`data-rg-switch="${m}" data-rg-switchcase="${R}" --val:: "${k}" --isMatched: ${x}`,"navy")}L&&(x?L.style.display="none":L.style.display=""),this._debug("rgSwitch",`data-rg-switch="${m}" data-rg-switchdefault --isMatched: ${x}`,"navy")}this._debug("rgSwitch","--------- rgSwitch (end) ------","navy","#B6ECFF")}}rgDisabled(g){this._debug("rgDisabled","--------- rgDisabled (start) ------","navy","#B6ECFF");const u="data-rg-disabled",d=this._listElements(u,g);if(this._debug("rgDisabled",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length){for(const h of d){const m=h.getAttribute(u).trim();if(!m){console.error(`rgDisabled Error:: Attribute has bad definition (data-rg-disabled="${m}").`);continue}let $=!1;/\!|<|>|=/.test(m)?$=this._calcComparison_A(m):$=this._calcComparison_B(m),$?h.disabled=!0:h.disabled=!1,this._debug("rgDisabled",`rgDisabled:: data-rg-disabled="${m}" & val=${val} => tf: ${$} -- outerHTML: ${h.outerHTML}`,"navy")}this._debug("rgDisabled","--------- rgDisabled (end) ------","navy","#B6ECFF")}}rgValue(g){this._debug("rgValue","--------- rgValue ------","navy","#B6ECFF");const u="data-rg-value",d=this._listElements(u,g);if(this._debug("rgValue",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u);if(!m){console.error(`rgValue Error:: Attribute has bad definition (data-rg-value="${m}").`);continue}const $=m.trim(),C=this._getControllerValue($);this._setElementValue(h,C),this._debug("rgValue",`elem.type:: ${h.type} -- ${$}:: ${C}`,"navy")}}rgChecked(g){this._debug("rgChecked","--------- rgChecked ------","navy","#B6ECFF");const u="data-rg-checked",d=this._listElements(u,g);if(this._debug("rgChecked",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u);if(!m){console.error(`rgChecked Error:: Attribute has bad definition (data-rg-checked="${m}").`);continue}const $=m.trim(),C=this._getControllerValue($);if(!Array.isArray(C)){console.error(`rgChecked Error:: The controller property ${$} is not array.`);continue}C.indexOf(h.value)!==-1?h.checked=!0:h.checked=!1,this._debug("rgChecked",`elem.type:: ${h.type} -- ${$}:: ${C}`,"navy")}}rgClass(g){this._debug("rgClass","--------- rgClass ------","navy","#B6ECFF");const u="data-rg-class",d=this._listElements(u,g);if(this._debug("rgClass",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u)||"",$=m.split(this.$rg.separator),C=$[0].trim(),A=this._getControllerValue(C)||[];if(!Array.isArray(A)){console.log(`%c rgClassWarn:: The controller property "${C}" is not an array.`,"color:Maroon; background:LightYellow");continue}let k=$[1]||"";k=k.trim()||"add",k=="replace"&&!!A.length&&h.removeAttribute("class");for(const v of A)h.classList.add(v);this._debug("rgClass",`data-rg-class="${m}" --- ctrlProp:: ${C} | ctrlVal:: ${A} | act:: ${k}`,"navy")}}rgStyle(g){this._debug("rgStyle","--------- rgStyle ------","navy","#B6ECFF");const u="data-rg-style",d=this._listElements(u,g);if(this._debug("rgStyle",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u)||"",$=m.split(this.$rg.separator),C=$[0].trim(),A=this._getControllerValue(C);let k=$[1]||"";k=k.trim()||"add",k=="replace"&&h.removeAttribute("style");let v=[];if(A){v=Object.keys(A);for(const L of v)h.style[L]=A[L]}this._debug("rgStyle",`data-rg-style="${m}" --- prop:: "${C}" | styleProps:: "${v}" | act:: "${k}"`,"navy")}}rgSrc(g){this._debug("rgSrc","--------- rgSrc ------","navy","#B6ECFF");const u="data-rg-src",d=this._listElements(u,g);if(this._debug("rgSrc",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u)||"",$=m.split(this.$rg.separator),C=$[0].trim(),A=this._getControllerValue(C);let k=$[1]||"";k=k.trim();const v=A||k;h.src=v,this._debug("rgSrc",`data-rg-src="${m}" --prop:: "${C}" --src:: "${v}"`,"navy")}}rgAttr(g){this._debug("rgAttr","--------- rgAttr ------","navy","#B6ECFF");const u="data-rg-attr",d=this._listElements(u,g);if(this._debug("rgAttr",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u)||"",$=m.split(this.$rg.separator),C=$[0].trim(),A=this._getControllerValue(C);if(!$[1]){console.error(`Attribute name is not defined in the ${u}="${m}".`);continue}const k=$[1].trim();h.setAttribute(k,A),this._debug("rgAttr",`data-rg-attr="${m}" --prop:: "${C}" --val:: "${A}" --> added ${k}="${A}"`,"navy")}}rgElem(g){this._debug("rgElem","--------- rgElem ------","navy","#B6ECFF");const u="data-rg-elem",d=this._listElements(u,g);if(this._debug("rgElem",`found elements:: ${d.length} | attrValQuery:: ${g}`,"navy"),!!d.length)for(const h of d){const m=h.getAttribute(u)||"";this.$rg.elems[m]=h}}rgEcho(){this._debug("rgEcho","--------- rgEcho (start) ------","navy","#B6ECFF");const g="data-rg-echo",u=this._listElements(g,"");if(this._debug("rgEcho",`found elements:: ${u.length}`,"navy"),!!u.length){for(const d of u){let h=d.getAttribute("data-rg-echo");this._debug("rgEcho",`rgEcho txt before: ${h}`,"navy","#B6ECFF"),h=this._solveInterpolated(h),h=this._solveMath(h),h=h.replace(/\[/g,"<").replace(/\]/g,">"),this._debug("rgEcho",`rgEcho txt after: ${h}
`,"navy","#B6ECFF"),d.innerHTML=h}this._debug("rgEcho","--------- rgEcho (end) ------","navy","#B6ECFF")}}rgI18n(){}}O(f,"DataRg");const p=f},961:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _DataRg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(242);class View extends _DataRg_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(){super()}async rgInc(r=!0){const i=document.querySelectorAll("[data-rg-inc]:not([data-rg-cin])");if(this._debug("rgInc","--------- rgInc ------","#8B0892","#EDA1F1"),this._debug("rgInc",`elems found: ${i.length}`,"#8B0892"),!!i.length){if(r){const n=document.querySelectorAll("[data-rg-incgen]");this._debug("rgInc",`data-rg-incgen elems deleted: ${n.length}`,"#8B0892");for(const l of n)l.remove()}for(const n of i){const c=n.getAttribute("data-rg-inc").replace(/\s+/g,"").replace(/^\//,"").split(this.$rg.separator),a=!!c&&!!c.length?"inc/"+c[0]:"",_=!!c&&c.length>=2?c[1]:"inner",f=!!c&&c.length===3?c[2]:"";if(this._debug().rgInc&&console.log(`
******** path_dest_cssSel:: `,a,_,f,"********"),!a){console.error("viewPath is not defined");return}let p,E;if(!!window&&!!window.regochWeber&&!!window.regochWeber.viewsCached&&!!window.regochWeber.viewsCached[a]){const g=this.fetchCachedView(a,f);p=g.nodes,E=g.str,this._debug("rgInc","--from cached JSON","#8B0892")}else{const g=await this.fetchRemoteView(a,f);p=g.nodes,E=g.str,this._debug("rgInc","--from server","#8B0892")}if(this._debug().rgInc&&(console.log("elem::",n),console.log("nodes loaded::",p)),_==="inner")n.innerHTML=E;else if(_==="outer")n.outerHTML=E;else if(_==="sibling"){const g=n.parentNode,u=n.nextSibling;for(const d of p){if(!d)return;const h=d.cloneNode(!0);h.nodeType===1&&(h.setAttribute("data-rg-incgen",""),n.hasAttribute("data-rg-cin")||g.insertBefore(h,u))}}else if(_==="prepend"){const g=p.length;for(let u=p.length-1;u>=0;u--){if(!!p.length&&!p[u])return;const d=p[u].cloneNode(!0);d.nodeType===1&&(d.setAttribute("data-rg-incgen",""),n.hasAttribute("data-rg-cin")||n.prepend(d))}}else if(_==="append")for(const g of p){if(!g)return;const u=g.cloneNode(!0);u.nodeType===1&&(u.setAttribute("data-rg-incgen",""),n.hasAttribute("data-rg-cin")||n.append(u))}n.setAttribute("data-rg-cin",""),/data-rg-inc/.test(E)&&await this.rgInc(!1)}}}async loadView(r,i,n="inner",l){const c=`[data-rg-view="${r}"]`,a=document.querySelector(c);if(this._debug("loadView",`--------- loadView ${c} -- ${i} ---------`,"#8B0892","#EDA1F1"),this._debug().loadView&&console.log("elem::",a),!a)throw new Error(`Element ${c} not found.`);if(!i)throw new Error("View path is not defined.");let _,f;if(!!window&&!!window.regochWeber&&!!window.regochWeber.viewsCached&&!!window.regochWeber.viewsCached[i]){const p=this.fetchCachedView(i,l);_=p.nodes,f=p.str,this._debug("loadView","--from cached JSON","#8B0892")}else{const p=await this.fetchRemoteView(i,l);_=p.nodes,f=p.str,this._debug("loadView","--from server","#8B0892")}if(this._debug().loadView&&console.log("nodes loaded::",_),this.emptyView(r,n),n==="inner")a.innerHTML=f;else if(n==="outer")a.outerHTML=f;else if(n==="sibling"){const p=a.parentNode,E=a.nextSibling;for(const g of _){const u=g.cloneNode(!0);u.nodeType===1&&(u.setAttribute("data-rg-viewgen",r),p.insertBefore(u,E))}}else if(n==="prepend"){const p=_.length;for(let E=_.length-1;E>=0;E--){const g=_[E].cloneNode(!0);g.nodeType===1&&(g.setAttribute("data-rg-viewgen",r),a.prepend(g))}}else if(n==="append")for(const p of _){const E=p.cloneNode(!0);E.nodeType===1&&(E.setAttribute("data-rg-viewgen",r),a.append(E))}return{elem:a,str:f,nodes:_}}async loadViews(r,i=!0){for(const n of r){const l=n[0],c=n[1],a=n[2],_=n[3];i?await this.loadView(l,c,a,_):this.loadView(l,c,a,_)}}emptyView(r,i="inner"){const n=`[data-rg-view="${r}"]`,l=document.querySelector(n);if(this._debug("emptyView",`--------- emptyView ${n} | ${i} ---------`,"#8B0892","#EDA1F1"),this._debug().emptyView&&console.log("elem::",l),!!l){if(i==="inner")l.innerHTML="";else if(i==="outer")l.outerHTML="";else if(i==="sibling")for(const c of document.querySelectorAll(`[data-rg-viewgen="${r}"`))c.remove();else if(i==="prepend")for(const c of document.querySelectorAll(`[data-rg-viewgen="${r}"`))c.remove();else if(i==="append")for(const c of document.querySelectorAll(`[data-rg-viewgen="${r}"`))c.remove()}}showViews(r,i){if(!i){r?document.body.style.visibility="visible":document.body.style.visibility="hidden";return}for(const c of document.body.childNodes)c.nodeType===1&&(r?c.style.visibility="visible":c.style.visibility="hidden");const n=document.createElement("div");n.setAttribute("data-rg-spinner-showviews","");const l=`
        <span>
          <style scoped>
            [data-rg-spinner-showviews]>span:after {
              content: '';
              display: block;
              font-size: 13px;
              width: 1em;
              height: 1em;
              margin-top: 55px;
              margin-left: auto;
              margin-right: auto;
              animation: spinner 1500ms infinite linear;
              border-radius: 0.5em;
              box-shadow: #BEBEBE 1.5em 0 0 0, #BEBEBE 1.1em 1.1em 0 0, #BEBEBE 0 1.5em 0 0, #BEBEBE -1.1em 1.1em 0 0, #BEBEBE -1.5em 0 0 0, #BEBEBE -1.1em -1.1em 0 0, #BEBEBE 0 -1.5em 0 0, #BEBEBE 1.1em -1.1em 0 0;
            }
            @-webkit-keyframes spinner {
              0% { transform: rotate(0deg);}
              100% { transform: rotate(360deg); }
            }
            @-moz-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @-o-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        </span>
        `;if(n.insertAdjacentHTML("beforeend",l),r){const c=document.querySelector("[data-rg-spinner-showviews]");document.body.removeChild(c)}else document.body.prepend(n)}fetchCachedView(r,i){const l=new DOMParser().parseFromString(window.regochWeber.viewsCached[r],"text/html");let c,a;if(!i)c=/\<title|\<meta|\<link\<base/.test(window.regochWeber.viewsCached[r])?l.head.childNodes:l.body.childNodes,a=window.regochWeber.viewsCached[r];else{const _=l.querySelector(i);c=[_],a=_?_.outerHTML:""}return{nodes:c,str:a}}async fetchRemoteView(r,i){const n=`/client/views/${r}`,l=new URL(n,this.$baseURIhost).toString(),c=await this.$httpClient.askHTML(l,i),a=c.res.content;if(c.status!==200||!a)throw new Error(`Status isn't 200 or content is empty for ${r}`);const _=c.res.content.nodes,f=c.res.content.str;return{nodes:_,str:f}}async lazyJS(r,i=0){if(!!r)for(const n of r){await new Promise(a=>setTimeout(a,i)),document.body.querySelectorAll(`script[src="${n}"]`).length&&this.unlazyJS([n]);const c=document.createElement("script");c.type="text/javascript",c.src=n,c.defer=!0,c.setAttribute("data-rg-lazyjs",""),document.body.appendChild(c)}}unlazyJS(r){if(!!r)for(const i of r){const n=document.body.querySelectorAll(`script[src="${i}"][data-rg-lazyjs]`);for(const l of n)l&&l.remove()}}unlazyAllJS(){const r=document.querySelectorAll("script[data-rg-lazyjs]")||[];for(const i of r)i&&i.remove()}async loadJS(urls){if(!!urls)for(let url of urls){url=url.trim(),/^http/.test(url)||(url=new URL(url,this.$baseURIhost).toString());const jsContents=[],answer=await this.$httpClient.askJS(url);jsContents.push(answer.res.content);for(const jsContent of jsContents)eval(jsContent)}}async rgLazyjs(r=0){this._debug("rgLazyjs","--------- rgLazyjs ------","navy","#B6ECFF");const i="data-rg-lazyjs",n=document.querySelectorAll(`[${i}]`);if(this._debug("rgLazyjs",`found elements:: ${n.length}`,"navy"),!n.length)return;const l=[];for(const c of n){const a=c.getAttribute("src");this._debug("rgLazyjs",`  src="${a}"`,"navy"),l.push(a)}this.unlazyAllJS(),await this.lazyJS(l,r)}loadCSS(r){if(!!r)for(const i of r){document.body.querySelectorAll(`link[href="${i}"]`).length&&this.unloadCSS([i]);const l=document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("href",i),l.defer=!0,document.head.appendChild(l)}}unloadCSS(r){if(!!r)for(const i of r){const n=document.head.querySelectorAll(`link[rel="stylesheet"][href="${i}"]`);for(const l of n)l&&l.remove()}}addCSS(r,i){const n=document.createElement("style");n.textContent=r,n.setAttribute("type","text/css"),n.setAttribute("data-rg-ref",i),document.head.appendChild(n)}delCSS(r){const i=document.createElement(`style[data-rg-ref="${r}"]`);i&&i.remove()}setTitle(r){document.title=r}setDescription(r){const i=document.head.querySelector('meta[name="description"]');if(!i)throw new Error('The meta[name="description"] tag is not placed in the HTML file.');i.setAttribute("content",r)}setKeywords(r){const i=document.head.querySelector('meta[name="keywords"]');if(!i)throw new Error('The meta[name="keywords"] tag is not placed in the HTML file.');i.setAttribute("content",r)}setLang(r){document.querySelector("html").setAttribute("lang",r)}async loadHead(r,i="inner"){const n=document.querySelector("head");if(this._debug("loadHead",`--------- loadHead -- ${r} ---------`,"#8B0892","#EDA1F1"),this._debug().loadView&&console.log("elem::",n),!n)throw new Error("Element HEAD not found.");if(!r)throw new Error("View path is not defined.");let l,c;if(window.regochWeber.viewsCached[r]){const a=this.fetchCachedView(r);l=a.nodes,c=a.str,this._debug("loadHead","--from cached JSON","#8B0892")}else{const a=await this.fetchRemoteView(r);l=a.nodes,c=a.str,this._debug("loadHead","--from server","#8B0892")}this._debug().loadHead&&console.log("nodes::",l),this._debug().loadHead&&console.log("str::",c);for(const a of document.querySelectorAll("[data-rg-headgen"))a.remove();if(i==="inner")n.innerHTML=c;else if(i==="prepend"){const a=l.length;for(let _=l.length-1;_>=0;_--){const f=l[_].cloneNode(!0);f.nodeType===1&&(f.setAttribute("data-rg-headgen",""),n.prepend(f))}}else if(i==="append")for(const a of l){const _=a.cloneNode(!0);_.nodeType===1&&(_.setAttribute("data-rg-headgen",""),n.append(_))}return{elem:n,str:c,nodes:l}}}O(View,"View");const __WEBPACK_DEFAULT_EXPORT__=View}},__webpack_module_cache__={};function __webpack_require__(r){var i=__webpack_module_cache__[r];if(i!==void 0)return i.exports;var n=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](n,n.exports,__webpack_require__),n.exports}O(__webpack_require__,"__webpack_require__"),__webpack_require__.d=(r,i)=>{for(var n in i)__webpack_require__.o(i,n)&&!__webpack_require__.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:i[n]})},__webpack_require__.o=(r,i)=>Object.prototype.hasOwnProperty.call(r,i),__webpack_require__.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var r={};__webpack_require__.r(r),__webpack_require__.d(r,{Auth:()=>v,Cookie:()=>A,Form:()=>M,HTTPClient:()=>f,Paginator:()=>V,eventEmitter:()=>L.Z,navig:()=>a.Z,util:()=>P});class i{constructor(e){this.routerOpts=e||{},this.trx,this.routeDefs=[]}set trx(e){if(!e.uri)throw new Error('The "uri" property is required.');Object.defineProperty(e,"uri",{value:e.uri,writable:!1}),Object.defineProperty(e,"body",{value:e.body,writable:!1}),e.uriParsed=this._uriParser(e.uri),this._trx=e}get trx(){return this._trx}when(e,...t){return this.routeDefs.push({route:e,routeParsed:this._routeParser(e),funcs:t}),this}redirect(e,t,s){const o=this.routeDefs.find(y=>y.route===t),b=o?o.funcs:[];return this.when(e,s,...b),this}notfound(...e){return this.when("<notfound>",...e),this}do(...e){return this.when("<do>",...e),this}async exe(){const e={...this.trx},t=e.uriParsed,s=this.routeDefs.find(y=>{const w=y.routeParsed;return this._routeRegexMatchNoParams(w,t)||this._routeWithParamsMatch(w,t)}),o=this.routeDefs.find(y=>y.route==="<notfound>"),b=this.routeDefs.find(y=>y.route==="<do>");if(s){e.routeParsed=s.routeParsed,e.query=t.queryObject,e.params=e.routeParsed?this._getParams(s.routeParsed.full,t.path):{};for(const y of s.funcs)await y(e)}else if(o)for(const y of o.funcs)await y(e);if(!!b&&!!b.funcs&&!!b.funcs.length)for(const y of b.funcs)await y(e);return e}_routeRegexMatchNoParams(e,t){const o=new RegExp(`^${e.full}$`,"i").test(t.path),b=e.segments===t.segments,y=o&&b;return this.routerOpts.debug&&console.log(`
_routeRegexMatchNoParams:: (route) ${e.full} - (uri) ${t.path} -> ${y}`),y}_routeWithParamsMatch(e,t){const o=new RegExp(`^${e.base}/`,"i").test(t.path),b=e.segments===t.segments,y=/\/\:/.test(e.full),w=o&&b&&y;return this.routerOpts.debug&&console.log(`_routeWithParamsMatch:: (route) ${e.full} - (uri) ${t.path} -> ${w}`),w}_removeSlashes(e){return e.trim().replace(/^\/+/,"").replace(/\/+$/,"")}_typeConvertor(e){function t(s){try{JSON.parse(s)}catch{return!1}return!0}return O(t,"isJSON"),!!e&&!isNaN(e)&&e.indexOf(".")===-1?e=parseInt(e,10):!!e&&!isNaN(e)&&e.indexOf(".")!==-1?e=parseFloat(e):(e==="true"||e==="false"||t(e))&&(e=JSON.parse(e)),e}_toQueryObject(e){const t=e.split("&"),s={};let o,b,y;return t.forEach(w=>{o=w.split("="),b=o[0],y=o[1],y=this._typeConvertor(y),s[b]=y}),s}_uriParser(e){const t=e.split("?"),s=this._removeSlashes(t[0]),o=s.split("/").length,b=t[1],y=b?this._toQueryObject(b):{};return{path:s,segments:o,queryString:b,queryObject:y}}_routeParser(e){const t=this._removeSlashes(e),s=t.split("/").length,o=t.replace(/\/\:.+/,"");return{full:t,segments:s,base:o}}_getParams(e,t){const s=e.split("/"),o=t.split("/"),b={};return s.forEach((y,w)=>{if(/\:/.test(y)){const S=y.replace(/^\:/,"");let T=o[w];T=this._typeConvertor(T),b[S]=T}}),b}}O(i,"RegochRouter");const n=i;class l extends n{constructor(e,t){super({debug:t}),this.debugRouter=e}_when(e,t,s={}){const o=s.authGuards||[];if(!e&&!!t)throw new Error(`Route is not defined for "${t.constructor.name}" controller.`);if(!!e&&!t)throw new Error(`Controller is not defined for route "${e}".`);if(/autoLogin|isLogged|hasRole/.test(o.join())&&!t.$auth)throw new Error(`Auth guards (autoLogin, isLogged, hasRole) are used but Auth is not injected in the controller ${t.constructor.name}. Use App::controllerAuth().`);const b=O(B=>{B.ctrl=t},"assign_ctrl"),y=[];if(o.length&&t.$auth){const B=t.$auth.autoLogin.bind(t.$auth),D=t.$auth.isLogged.bind(t.$auth),q=t.$auth.hasRole.bind(t.$auth);o.indexOf("autoLogin")!==-1&&y.push(B),o.indexOf("isLogged")!==-1&&y.push(D),o.indexOf("hasRole")!==-1&&y.push(q)}const w=t.$preflight?t.$preflight:[],S=t.processing.bind(t),T=t.$postflight?t.$postflight:[];this.when(e,b,...y,...w,S,...T)}_notfound(e){const t=e.processing.bind(e);this.notfound(t)}_do(...e){this.do(...e)}_redirect(e,t){const s=O(()=>{window.history.pushState(null,"",t)},"cb");this.redirect(e,t,s)}async _exe(e){try{const t=new Date;let s=window.location.pathname+window.location.search;s=decodeURI(s),this.debugRouter&&console.log(`%c --------- router exe start --> ${s} ------`,"color:#680C72; background:#E59FED"),this.trx={uri:s,pevent:e};const o=await this.exe(),b=new Date;o.elapsedTime=b-t+" ms",this.debugRouter&&(console.log("Router trx::",o),console.log(`%c --------- router exe end --> elapsedTime: ${this.trx.elapsedTime} ------`,"color:#680C72; background:#E59FED"))}catch(t){/AuthWarn::/.test(t.message)?console.log(`%c${t.message}`,"color:#FF6500; background:#FFFEEE;"):console.error(t)}}}O(l,"Router");const c=l;var a=__webpack_require__(719);class _{constructor(e){this.url,this.protocol="http:",this.hostname="",this.port=80,this.pathname="/",this.queryString="",e?this.opts=e:this.opts={encodeURI:!1,timeout:8e3,responseType:"",retry:3,retryDelay:5500,maxRedirects:3,headers:{authorization:"",accept:"*/*","content-type":"text/html; charset=UTF-8"}},this.timeout=this.opts.timeout,this.responseType=this.opts.responseType,this.req_headers={...this.opts.headers},this.xhr=new XMLHttpRequest,this.interceptor}async askOnce(e,t="GET",s){const o={requestURL:e,requestMethod:t,status:0,statusMessage:"",https:!1,req:{headers:this.req_headers,payload:void 0},res:{headers:void 0,content:void 0},time:{req:this._getTime(),res:void 0,duration:void 0}};try{e=this._parseUrl(e),o.requestURL=e,o.https=/^https/.test(this.protocol)}catch(y){const w={...o};return w.status=400,w.statusMessage=y.message||"Bad Request",w.time.res=this._getTime(),w.time.duration=this._getTimeDiff(w.time.req,w.time.res),w}if(this.interceptor&&await this.interceptor(),this.xhr.open(t,e,!0,null,null),this._xhr_timeout(this.timeout),this._xhr_responseType(this.responseType),this._xhr_requestHeaders(this.req_headers),!!s&&!/GET/i.test(t)){o.req.payload=s;const y=this.req_headers["content-type"]||"";let w;/application\/json/.test(y)?w=JSON.stringify(s):w=s,this.xhr.send(w)}else this.xhr.send();return new Promise((y,w)=>{this.xhr.onload=S=>{const T={...o};T.status=this.xhr.status,T.statusMessage=this.xhr.statusText,T.res.headers=this.getResHeaders(),T.res.content=S.target.response,T.time.res=this._getTime(),T.time.duration=this._getTimeDiff(T.time.req,T.time.res),y(T)},this.xhr.onerror=S=>{this.kill();const T=this._formatError(S,e),B={...o};B.status=T.status,B.statusMessage=T.message,B.time.res=this._getTime(),B.time.duration=this._getTimeDiff(B.time.req,B.time.res),y(B)},this.xhr.ontimeout=()=>{this.kill();const S={...o};S.status=408,S.statusMessage=`Request aborted due to timeout (${this.opts.timeout} ms) ${e} `,S.time.res=this._getTime(),S.time.duration=this._getTimeDiff(S.time.req,S.time.res),y(S)}})}async ask(e,t="GET",s){let o=await this.askOnce(e,t,s);const b=[o];let y=1;for(;!!o&&/^3\d{2}/.test(o.status)&&y<=this.opts.maxRedirects;){const S=new URL(e,o.res.headers.location);console.log(`#${y} redirection ${o.status} from ${this.url} to ${S}`),o=await this.askOnce(S,t,s),b.push(o),y++}let w=1;for(;o.status===408&&w<=this.opts.retry;)console.log(`#${w} retry due to timeout (${this.opts.timeout}) on ${e}`),await new Promise(S=>setTimeout(S,this.opts.retryDelay)),o=await this.askOnce(e,t,s),b.push(o),w++;return b}async askJSON(e,t="GET",s){let o=s;if(!!s&&typeof s=="string")try{o=JSON.parse(s)}catch{throw new Error("Body string is not valid JSON.")}this.setReqHeaders({"content-type":"application/json; charset=utf-8",accept:"application/json"});const b=await this.askOnce(e,t,o);if(b.res.content)try{b.res.content=JSON.parse(b.res.content)}catch{throw new Error("Response content is not valid JSON.")}return b}async askHTML(e,t){const s=await this.askOnce(e),b=new DOMParser().parseFromString(s.res.content,"text/html");let y,w;if(!t)y=b.body.childNodes,w=s.res.content;else{const S=b.querySelector(t);y=[S],w=S?S.outerHTML:""}return s.res.content={nodes:y,str:w},s}async askJS(e){this.setReqHeaders({"content-type":"application/javascript; charset=utf-8",accept:"application/javascript"});const t=await this.askOnce(e,"GET");return t.res.content=t.res.content,t}async sendFormData(e,t){this.setReqHeaders({"content-type":"multipart/form-data",accept:"*/*"}),this.delReqHeaders(["content-type"]);const s=await this.askOnce(e,"POST",t);if(s.res.content)try{s.res.content=JSON.parse(s.res.content)}catch{console.log("WARNING: Response content is not JSON.")}return s}object2formdata(e){const t=new FormData;for(const[s,o]of Object.entries(e))t.set(s,o);return t}async sendForm(e,t,s="application/x-www-form-urlencoded"){let o="RegochWebHttpClient";o+=Math.floor(Math.random()*32768),o+=Math.floor(Math.random()*32768),o+=Math.floor(Math.random()*32768),console.log("boundary::",o);const b=`--${o}\r
Content-Disposition: form-data; name="db_id"\r
\r
12345\r
--${o}--`;return console.log("body::",b),await this.askOnce(e,"POST",t)}kill(){this.xhr.abort()}setInterceptor(e){this.interceptor=e.bind(this)}setReqHeaders(e){Object.keys(e).forEach(t=>{const s=t,o=e[t];this.setReqHeader(s,o)})}setReqHeader(e,t){e=e.toLowerCase(),this.req_headers[e]=t}delReqHeaders(e){e.forEach(t=>{delete this.req_headers[t]})}getReqHeaders(){return this.req_headers}getResHeaders(){const t=this.xhr.getAllResponseHeaders().split(`
`),s={};return t.forEach(o=>{const b=o.split(":"),y=b[0];if(y){const w=b[1].trim();s[y]=w}}),s}_parseUrl(e){e=this._correctUrl(e);const t=new URL(e);return this.url=e,this.protocol=t.protocol,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.queryString=t.search,e}_correctUrl(e){if(!e)throw new Error("URL is not defined");return e=e.trim(),/^https?:\/\//.test(e)||(e="http://"+e),this.opts.encodeURI?e=encodeURI(e):(e=e.replace(/\s+/g," "),e=e.replace(/ /g,"%20")),e}_formatError(e,t){const s=new Error(e);return e.target.status===0?(s.status=0,s.message=`Status:0 Bad Request ${t}`):(s.status=e.status||400,s.message=e.message),s.original=e,s}_getTime(){return new Date().toISOString()}_getTimeDiff(e,t){const s=new Date(e);return(new Date(t).getTime()-s.getTime())/1e3}_xhr_requestHeaders(e){Object.keys(e).forEach(t=>this.xhr.setRequestHeader(t.toLowerCase(),e[t]))}_xhr_timeout(e){this.xhr.timeout=+e||0}_xhr_responseType(e){this.xhr.responseType=e||"text"}}O(_,"HTTPClient");const f=_,p={warnings:!1,router:!1,regochRouter:!1,render:!1,navig:!1,rgInc:!1,loadView:!1,emptyView:!1,loadHead:!1,rgLazyjs:!1,rgFor:!1,rgRepeat:!1,rgPrint:!1,rgIf:!1,rgSpinner:!1,rgSwitch:!1,rgDisabled:!1,rgValue:!1,rgChecked:!1,rgClass:!1,rgStyle:!1,rgSrc:!1,rgAttr:!1,rgElem:!1,rgEcho:!1,rgKILL:!1,rgHref:!1,rgClick:!1,rgKeyup:!1,rgChange:!1,rgEvt:!1,rgSet:!1,rgModel:!1};window.regochWeber={};class E{constructor(){this.ctrls={},this.$debugOpts=p}controllers(e){for(const t of e){const s=new t(this);this.ctrls[t.name]=s}return this._httpClient(),this}_controllerProp(e,t){if(Object.keys(this.ctrls).length===0)throw new Error(`The controller property "${e}" should be defined after the method controllers().`);for(const o of Object.keys(this.ctrls))this.ctrls[o][e]=t;return this}_httpClient(){const e={encodeURI:!0,timeout:21e3,retry:0,retryDelay:1300,maxRedirects:0,headers:{authorization:"",accept:"*/*","content-type":"text/html; charset=UTF-8"}},t=new f(e);this._controllerProp("$httpClient",t);const s=`${window.location.protocol}//${window.location.host}`;return this._controllerProp("$baseURIhost",s),this}fridge(e,t){if(Object.keys(this.ctrls).length===0)throw new Error(`The $fridge property "${e}" should be defined after the method controllers().`);for(const o of Object.keys(this.ctrls))this.ctrls[o].$fridge[e]=t;return this}auth(e){this._controllerProp("$auth",e);for(const t of Object.keys(this.ctrls)){const s=this.ctrls[t].$auth;s.login=s.login.bind(s),s.logout=s.logout.bind(s),s.getLoggedUserInfo=s.getLoggedUserInfo.bind(s),s.setLoggedUserInfo=s.setLoggedUserInfo.bind(s),s.getJWTtoken=s.getJWTtoken.bind(s)}return this}preflight(...e){return this._controllerProp("$preflight",e),this}postflight(...e){return this._controllerProp("$postflight",e),this}routes(e){const t=new c(this.$debugOpts.router,this.$debugOpts.regochRouter);for(const s of e){if(!s||!!s&&!Array.isArray(s)||!!s&&!s.length)throw new Error(`Invalid route definition ${s}`);const o=s[0];if(o==="when"){const b=s[1],y=s[2],w=s[3];if(!this.ctrls[y])throw new Error(`Controller "${y}" is not defined or not injected in the App.`);const S=this.ctrls[y];t._when(b,S,w)}else if(o==="notfound"){const b=s[1];if(!this.ctrls[b])throw new Error(`Controller "${b}" is not defined or not injected in the App.`);const y=this.ctrls[b];t._notfound(y)}else if(o==="do"){const b=s.filter((y,w)=>{if(w!==0)return y});t._do(...b)}else if(o==="redirect"){const b=s[1],y=s[2];t._redirect(b,y)}}return t._exe(),a.Z.onUrlChange(s=>{t._exe(s)}),this}viewsCached(e){return window.regochWeber.viewsCached=e,this}debugger(e){return e&&(this.$debugOpts=e),this._controllerProp("$debugOpts",this.$debugOpts),this}onReady(e){window.onload=e}onDOMLoaded(e){document.addEventListener("DOMContentLoaded",e)}createDOMObserver(e){this.DOMObserver=new MutationObserver(e)}}O(E,"App");const g=E;var u=__webpack_require__(961);class d extends u.Z{constructor(){super(),this.$model={},this.$modeler={}}proxifyModel(){const e={set:(t,s,o)=>{const b=Reflect.set(t,s,o);return this.render("$model."+s),b}};this.$model=new Proxy(this.$model,e)}modeler(){this.$modeler.use=e=>({setValue:(s,o)=>{const b=o?`${e}.${o}`:e;this._setModelValue(b,s)},getValue:s=>{const o=s?`${e}.${s}`:e;return this._getModelValue(o)},mpush:s=>{this.$model[e].push(s),this.render("$model."+e)},mpop:()=>{this.$model[e].pop(),this.render("$model."+e)},munshift:s=>{this.$model[e].unshift(s),this.render("$model."+e)},mshift:()=>{this.$model[e].shift(),this.render("$model."+e)},mrender:()=>{this.render("$model."+e)}})}emptyModel(){this.$model={}}isModelEmpty(){return!Object.keys(this.$model).length}}O(d,"Model");const h=d;class m extends h{constructor(){super(),this.$debugOpts={},this.$fridge={},this.$navig=a.Z}async loader(e){}async init(e){}async rend(e){await this.render()}async postrend(e){}async destroy(e){}async processing(e){a.Z.setPrevious(),await a.Z.resetPreviousController(e),a.Z.setCurrent(this),this._debug().navig&&console.log("%c---navig---","color:green; background:#D9FC9B;",a.Z),this.emptyModel(),this.proxifyModel(),this.modeler();try{await this.loader(e)}catch(t){console.error(t)}await this.rgInc(!0),this.rgSetinitial();try{await this.init(e)}catch(t){console.error(t)}try{await this.rend(e)}catch(t){console.error(t)}try{await this.postrend(e)}catch(t){console.error(t)}await this.rgLazyjs()}async render(e,t=5){e&&(e=e.replace(/___.+$/,"")),this._debug("render",`--------- render (start) -- attrValQuery: ${e} -- renderDelay: ${t} -- ctrl: ${this.constructor.name} ------`,"green","#D9FC9B"),this.rgFor(e),this.rgRepeat(e),this.rgPrint(e),await new Promise(s=>setTimeout(s,t)),this.rgIf(e),this.rgSpinner(e),this.rgSwitch(e),this.rgDisabled(e),this.rgValue(e),this.rgChecked(e),this.rgClass(e),this.rgStyle(e),this.rgSrc(e),this.rgAttr(e),this.rgElem(e),this.rgEcho(),await new Promise(s=>setTimeout(s,t)),await this.rgKILL(),this.rgHref(),this.rgClick(),this.rgKeyup(),this.rgChange(),this.rgEvt(),this.rgSet(),this.rgModel(),this._debug("render",`--------- render (end) -- attrValQuery: ${e} ------`,"green","#D9FC9B")}async renders(e=[],t=5){for(const s of e)await this.render(s,t)}}O(m,"Controller");const $=m;class C{constructor(e,t){this.cookieOpts=e,this.debug=t}put(e,t){if(!document)throw new Error("The document is not available.");const s=encodeURIComponent(t);let o=`${e}=${s};`;o=this._appendCookieOptions(o),document.cookie=o,this.debug&&console.log("cookie-put():cookieStr: ",o)}putObject(e,t){if(!document)throw new Error("The document is not available.");const s=encodeURIComponent(JSON.stringify(t));let o=`${e}=${s};`;o=this._appendCookieOptions(o),document.cookie=o,this.debug&&console.log("cookie-putObject(): ",o)}getAll(){if(!document)throw new Error("The document is not available.");const e=document.cookie;return this.debug&&console.log("cookie-getAll(): ",e),e}get(e){if(!document)throw new Error("The document is not available.");const t=this._toCookiesArr();let s,o;return t.forEach(b=>{s=b.split("="),s[0]===e&&(o=s[1])}),o=decodeURIComponent(o),this.debug&&(console.log("cookie-get()-cookiesArr: ",t),console.log("cookie-get()-cookieVal: ",e,"=",o)),o}getObject(e){if(!document)throw new Error("The document is not available.");const t=this.get(e);let s=null;try{if(t!=="undefined"&&!!t){const o=decodeURIComponent(t);s=JSON.parse(o)}}catch(o){console.error("cookie-getObject(): ",o)}return this.debug&&(console.log("cookie-getObject():cookieVal: ",t),console.log("cookie-getObject():cookieObj: ",s)),s}remove(e){if(!document)throw new Error("The document is not available.");let t=new Date("1970-01-01T01:00:00");t=t.toUTCString(),document.cookie=`${e}=;expires=${t};path=/;`,this.debug&&console.log("cookie-remove(): ",e," cookie is deleted.")}removeAll(){if(!document)throw new Error("The document is not available.");let e=new Date("1970-01-01T01:00:00");e=e.toUTCString();const t=this._toCookiesArr();let s;const o=[];t.forEach(b=>{s=b.split("="),document.cookie=`${s[0]}=;expires=${e};path=/;`,o.push(document.cookie)}),this.debug&&(console.log("cookie-removeAll():before:: ",t),console.log("cookie-removeAll():after:: ",o))}exists(e){if(!document)throw new Error("The document is not available.");const t=this._toCookiesArr();let s,o=!1;return t.forEach(b=>{s=b.split("="),s[0]===e&&(o=!0)}),this.debug&&console.log("cookie-exists(): ",o),o}_appendCookieOptions(e){if(!this.cookieOpts)return e;if(this.cookieOpts.domain&&(e+=`domain=${this.cookieOpts.domain};`),this.cookieOpts.path&&(e+=`path=${this.cookieOpts.path};`),this.cookieOpts.expires){let t;if(typeof this.cookieOpts.expires=="number"){const o=new Date;o.setTime(o.getTime()+this.cookieOpts.expires*60*60*1e3),t=o.toUTCString()}else t=this.cookieOpts.expires.toUTCString();e+=`expires=${t};`}return this.cookieOpts.secure&&(e+="secure;"),this.cookieOpts.httpOnly&&(e+="HttpOnly;"),this.cookieOpts.sameSite&&(e+=`SameSite=${this.cookieOpts.sameSite};`),e}_toCookiesArr(){return document.cookie.split(";").map(o=>o.trim())}}O(C,"Cookie");const A=C;class k{constructor(e){this.authOpts=e;const t={path:"/",expires:5,secure:!1,httpOnly:!1,sameSite:"strict"};this.cookie=new A(t);const s={encodeURI:!1,timeout:8e3,retry:3,retryDelay:5500,maxRedirects:3,headers:{authorization:"",accept:"*/*","content-type":"text/html; charset=UTF-8"},responseType:""};this.httpClient=new f(s),this.jwtToken,this.loggedUser=this.getLoggedUserInfo()}async login(e){const t=this.authOpts.apiLogin,s=await this.httpClient.askJSON(t,"POST",e);if(s.status===200){const o=s.res.content;this.jwtToken=o.jwtToken,this.loggedUser=o.loggedUser,this.cookie.put("auth_jwtToken",o.jwtToken),this.cookie.putObject("auth_loggedUser",o.loggedUser);const b=this._correctURL(this.authOpts.afterGoodLogin,o.loggedUser);return b&&a.Z.goto(b),o}else{this.loggedUser=null,this.cookie.removeAll();const o=!!s.res.content&&(s.res.content.message||s.res.content.msg)?s.res.content.message||s.res.content.msg:"Bad Login";throw new Error(o)}}async logout(e){this.cookie.removeAll(),this.loggedUser=void 0,await new Promise(s=>setTimeout(s,e));const t=this._correctURL(this.authOpts.afterLogout,null);t&&a.Z.goto(t)}getLoggedUserInfo(){return this.loggedUser||this.cookie.getObject("auth_loggedUser")}setLoggedUserInfo(e){this.loggedUser=e,this.cookie.putObject("auth_loggedUser",e)}getJWTtoken(){return this.jwtToken||this.cookie.get("auth_jwtToken")}autoLogin(){const e=this.getLoggedUserInfo();if(!!e&&!!e.username){const t=this._correctURL(this.authOpts.afterGoodLogin,e);t&&a.Z.goto(t),console.log(`%c AuthWarn:: Autologin to ${t} is triggered.`,"color:Maroon; background:LightYellow")}}isLogged(){const e=this.getLoggedUserInfo();if(!(!!e&&!!e.username)){const s=this._correctURL(this.authOpts.afterBadLogin,e);throw s&&a.Z.goto(s),new Error("AuthWarn:: This route is blocked because the user is not logged in.")}}hasRole(){const e=this.getLoggedUserInfo(),t=window.location.pathname+window.location.search;let s=!1;if(!!e&&!!e.role&&(s=t.indexOf(e.role)!==-1),!s){const o=this._correctURL(this.authOpts.afterBadLogin,e);throw o&&a.Z.goto(o),new Error("AuthWarn:: This route is blocked because the user doesn't have valid role.")}}_correctURL(e,t){let s;return!!t&&!!t.role?s=e?e.replace("{loggedUserRole}",t.role):"":s=e||"",s}}O(k,"Auth");const v=k;var L=__webpack_require__(632);class x{constructor(e){this.formName=e,this.debugOptions={setControl:!1,setControls:!1,getControl:!1,getControls:!1,delControl:!1,delControls:!1}}setControl(e,t){this._debug("setControl",`--------- setControl("${e}", "${t}") ------`,"green","#A1F8DC");const s=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name="${e}"]`);if(!s.length){console.log(`%c FormWarn:: Form "${this.formName}" doesn't have control with name="${e}" attribute.`,"color:Maroon; background:LightYellow");return}for(const o of s){if(o.type==="text")typeof t=="object"&&(t=JSON.stringify(t)),o.value=t,o.setAttribute("value",t);else if(o.type==="number")t===""?t=0:typeof t=="string"&&(t=+t),o.value=t,o.setAttribute("value",t);else if(o.type==="checkbox")o.checked=!1,typeof t!="boolean"&&t.indexOf(o.value)!==-1?o.checked=!0:typeof t=="boolean"&&(o.checked=t);else if(o.type==="radio")o.checked=!1,t===o.value&&(o.checked=!0);else if(o.type==="select-multiple"){const b=o;for(const y of b)y.selected=!1,t.indexOf(y.value)!==-1&&(y.selected=!0)}else o.type==="textarea"&&typeof t=="object"&&(t=JSON.stringify(t,null,2)),o.value=t;this._debug("setControl",`${o.type}[name="${e}"] got value="${t}"`,"green")}}setControls(e){if(this._debug("setControls","--------- setControls ------","green","#88DBC0"),!e)return;const t=Object.keys(e);for(const s of t){const o=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name^="${s}"]`);if(this._debug("setControls",`
Elems found: ${o.length} in the form for name^="${s}".`,"green"),!o.length){this._debug("setControls",`FormWarn::setControls -> Form "${this.formName}" doesn't have control with name^="${s}" attribute.`,"green");continue}for(const b of o){let y,w;if(b){w=b.getAttribute("name");const S=w.split("."),T=S[0],B=S[1];T&&!B?y=e[T]:T&&B&&(y=e[T][B])}w&&this.setControl(w,y),this._debug().setControls&&console.log(`setControls:: obj-key:: ${s} , attrVal:: ${w} , elem::`,b)}}}getControl(e,t=!0){this._debug("getControl","--------- getControl ------","green","#A1F8DC");const s=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name="${e}"]`);s.length||console.error(`Form "${this.formName}" doesn't have name="${e}" control.`);let o;const b=[];let y=1;for(const w of s){if(w.type==="checkbox"){let S=w.value;t&&(S=this._typeConvertor(w.value)),w.checked&&(b.push(S),o=b),y===s.length&&!o&&(o=[])}else if(w.type==="select-multiple"){const S=w.selectedOptions;for(const T of S){let B=T.value;t&&(B=this._typeConvertor(T.value)),b.push(B),o=b}y===s.length&&!o&&(o=[])}else if(w.type==="radio"){let S=w.value;t&&(S=this._typeConvertor(w.value)),w.checked&&(o=S)}else if(w.type==="number")o=w.valueAsNumber;else if(w.type==="password")o=w.value;else if(w.type==="file"&&w.multiple)o=w.files;else if(w.type==="file")o=w.files[0];else{let S=w.value;t&&(S=this._typeConvertor(w.value)),o=S}y++}return this._debug("getControl",`${o}`,"green"),o}getControls(e,t=!0){e||console.error('getControlsErr: Argument "keys" is not defined. It should be an array.'),this._debug("getControls","--------- getControls ------","green","#A1F8DC"),this._debug("getControls",e,"green");const s={};for(const o of e)s[o]=this.getControl(o,t);return s}delControl(e){this._debug("delControl","--------- delControl ------","green","#A1F8DC"),this._debug("delControl",e,"green");const t=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name^="${e}"]`);t.length||console.error(`Form "${this.formName}" doesn't have name^="${e}" control.`);for(const s of t)if(s.type==="checkbox")s.checked=!1;else if(s.type==="select-multiple"){const o=s;for(const b of o)b.selected=!1}else s.type==="radio"?s.checked=!1:s.value=""}delControls(e){e||console.error('delControlsErr: Argument "keys" is not defined. It should be an array.'),this._debug("delControls","--------- delControls ------","green","#A1F8DC"),this._debug("delControls",e,"green");for(const t of e)this.delControl(t)}_typeConvertor(e){function t(s){try{JSON.parse(s)}catch{return!1}return!0}return O(t,"isJSON"),!!e&&!isNaN(e)&&!/\./.test(e)?e=parseInt(e,10):!!e&&!isNaN(e)&&/\./.test(e)?e=parseFloat(e):(e==="true"||e==="false"||t(e))&&(e=JSON.parse(e)),e}_debug(e,t,s,o){return this.debugOptions[e]&&console.log(`%c ${t}`,`color: ${s}; background: ${o}`),this.debugOptions}}O(x,"Form");const M=x;class R{constructor(e,t){this.linksSize=+e||5,this.currentPageClasses=t||["active"]}async page(e,t,s){e=+e;const o=Math.ceil(t/s),b=Math.ceil(this.linksSize/2);let y,w;o>=this.linksSize?e>=1&&e<this.linksSize?(y=1,w=this.linksSize):e>=this.linksSize&&e<=o-b?(y=e-b,w=e+b):(y=o-this.linksSize+1,w=o):(y=1,w=o);let S;const T=[];for(S=y;S<=w;S++){const B=S===e?this.currentPageClasses:[],D={i:S,c:B};T.push(D)}return{pageLinks:T,pagesTotal:o}}skipCalc(e,t){return(e-1)*t}ordCalc(e,t,s){return(e-1)*t+s+1}}O(R,"Paginator");const V=R;class N{sleep(e){return new Promise(t=>setTimeout(t,e))}}O(N,"Util");const P=new N;window.regochWeber.sys={App:g,Controller:$,syslib:r}})()})();

//# sourceMappingURL=index.min.js.map