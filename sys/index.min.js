var U=Object.defineProperty;var T=(s,n)=>U(s,"name",{value:n,configurable:!0});(()=>{"use strict";var __webpack_modules__={632:(s,n,i)=>{i.d(n,{Z:()=>h});class l{constructor(){this.activeOns=[]}emit(f,y={}){const C=new CustomEvent(f,{detail:y});window.dispatchEvent(C)}on(f,y){const C=T(g=>{y.call(null,g)},"listenerWindow");this._removeOne(f,y),this.activeOns.push({eventName:f,listener:y,listenerWindow:C}),window.addEventListener(f,C)}once(f,y){const C=T(g=>{y.call(null,g),this._removeOne(f,y,C)},"listenerWindow");window.addEventListener(f,C,{once:!0})}off(f,y){this._removeOne(f,y)}offAll(f){let y=0;for(const C of this.activeOns)C.eventName===f&&(window.removeEventListener(C.eventName,C.listenerWindow),this.activeOns.splice(y,1)),y++}getListeners(){return{...this.activeOns}}_removeOne(f,y){if(!y)throw new Error("eventEmitter._removeOne Error: listener is not defined");let C=0;for(const g of this.activeOns)g.eventName===f&&g.listener.toString()===y.toString()&&(window.removeEventListener(g.eventName,g.listenerWindow),this.activeOns.splice(C,1)),C++}}T(l,"EventEmitter");const h=new l},719:(s,n,i)=>{i.d(n,{Z:()=>b});var l=i(632);class a{constructor(){this.previous={uri:"",ctrl:null},this.current={uri:"",ctrl:null}}setPrevious(){this.previous={...this.current}}setCurrent(y){const C=this.getCurrentURI();this.current={uri:C,ctrl:y}}getPrevioustURI(){return this.previous.uri}getCurrentURI(){return window.location.pathname+window.location.search}async resetPreviousController(y){const C=this.previous.ctrl;if(C){await C.destroy(y),C.rgKILL(),C.emptyModel();const g=Object.keys(C);for(const u of g)u!=="$debugOpts"&&u!=="$fridge"&&u!=="$model"&&u!=="$modeler"&&u!=="$navig"&&u!=="$rg"&&u!=="$httpClient"&&u!=="$baseURIhost"&&u!=="$auth"&&delete C[u]}}goto(y,C,g){if(!y)throw new Error('The argument "url" is not defined');C||(C={}),g||(g=""),C={...C,url:y},window.history.pushState(C,g,y),l.Z.emit("pushstate",C)}goblind(y,C,g){if(!y)throw new Error('The argument "url" is not defined');C||(C={}),g||(g=""),C={...C,url:y},window.history.pushState(C,g,y)}forward(){window.history.forward()}back(){window.history.back()}go(y){window.history.go(y)}reload(){window.location.reload()}onPushstate(y){l.Z.on("pushstate",y)}onPopstate(y){window.addEventListener("popstate",y)}onUrlChange(y){this.onPushstate(y),this.onPopstate(y)}onHashchange(y){window.addEventListener("hashchange",y)}}T(a,"Navig");const b=new a},835:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});class Aux{_getControllerValue(s){s=this._solveInterpolated(s),s=this._solveMath(s);const n=s.split("."),i=n[0];let l=this[i];return n.forEach((a,h)=>{h!==0&&l!=null&&(l=l[a])}),l}_setControllerValue(s,n){const i=s.split(".");let l=1,a=this;for(const h of i)l!==i.length?(a[h]===void 0&&(a[h]={}),a=a[h]):a[h]=n,l++}_getModelValue(s){const n="$model."+s;return this._getControllerValue(n)}_setModelValue(s,n){const i=s.split("."),l=i.shift();if(i.length===0)this.$model[l]=n;else if(i.length===1){const a=i[0],h=this.$model[l]||{};h[a]=n,this.$model[l]=h}else if(i.length===2){const a=i[0],h=i[1],b=this.$model[l]||{};b[a]=b[a]||{},b[a][h]=n,this.$model[l]=b}else if(i.length===3){const a=i[0],h=i[1],b=i[2],f=this.$model[l]||{};f[a]=f[a]||{},f[a][h]=f[a][h]||{},f[a][h][b]=n,this.$model[l]=f}else if(i.length===4){const a=i[0],h=i[1],b=i[2],f=i[3],y=this.$model[l]||{};y[a]=y[a]||{},y[a][h]=y[a][h]||{},y[a][h][b]=y[a][h][b]||{},y[a][h][b][f]=n,this.$model[l]=y}else if(i.length===5){const a=i[0],h=i[1],b=i[2],f=i[3],y=i[4],C=this.$model[l]||{};C[a]=C[a]||{},C[a][h]=C[a][h]||{},C[a][h][b]=C[a][h][b]||{},C[a][h][b][f]=C[a][h][b][f]||{},C[a][h][b][f][y]=n,this.$model[l]=C}}_solve_$i(s,n,i){let l;return!i||i==="0"?l=new RegExp("\\$i0|\\$i","g"):l=new RegExp(`\\$i${i}`,"g"),n=n.replace(l,s),n}_solveInterpolated(s){const n="{{",i="}}",l=new RegExp(`${n}\\s*${this.$rg.varnameChars}\\s*${i}`,"g"),a=s.match(l)||[];for(const h of a){const b=h.replace(n,"").replace(i,"").trim();let f=this._getControllerValue(b);f===void 0&&(this._debug("warnings",`_solveInterpolatedWarn:: Controller property ${b} is undefined.`,"Maroon","LightYellow"),f=""),s=s.replace(h,f),l.test(s)&&(s=this._solveInterpolated(s))}return s}_solveMath(txt){const reg=/solveMath\/[\d\+\-\*\/\%\(\)\s]+\//g,evs=txt.match(reg);if(!evs)return txt;for(const ev of evs){const reg2=/solveMath\/([\d\+\-\*\/\%\(\)\s]+)\//,expression=ev.match(reg2)[1],result=eval(expression);txt=txt.replace(reg2,result)}return txt}_calcComparison(s,n,i){let l=!!s;const a=i.length?this._typeConvertor(i[0]):"";return n==="$not"?l=!s:n==="$eq"?l=s===a:n==="$ne"?l=s!==a:n==="$gt"?l=typeof s=="number"?s>a:!1:n==="$gte"?l=typeof s=="number"?s>=a:!1:n==="$lt"?l=typeof s=="number"?s<a:!1:n==="$lte"?l=typeof s=="number"?s<=a:!1:n==="$in"&&!!a?l=a.indexOf(s)!==-1:n==="$nin"&&!!a?l=a.indexOf(s)===-1:n==="$reg"&&!!a?l=s!==void 0?a.test(s):!1:n==="$nreg"&&!!a&&(l=s!==void 0?!a.test(s):!1),l}_typeConvertor(s){function n(i){try{JSON.parse(i)}catch{return!1}return!0}return T(n,"isJSON"),!!s&&!isNaN(s)&&!/\./.test(s)?s=parseInt(s,10):!!s&&!isNaN(s)&&/\./.test(s)?s=parseFloat(s):(s==="true"||s==="false"||n(s))&&(s=JSON.parse(s)),s}_funcParse(s,n,i){const l=s.match(/^(.+)\((.*)\)$/);if(!l)return console.error(`_funcParseErr: Function "${s}" has bad definition.`),{};const a=l[1]||"",h=l[2]?l[2].trim():"",b=h?h.split(",").map(f=>{if(f=f.trim(),f==="$element")f=n;else if(f==="$value")f=this._getElementValue(n,!0);else if(f==="$event")f=i;else if((f==="true"||f==="false")&&!/\'/.test(f))f=JSON.parse(f);else if(/^-?\d+\.?\d*$/.test(f)&&!/\'/.test(f))f=+f;else if(/^\/.+\/i?g?$/.test(f)){const y=f.match(/^\/(.+)\/(i?g?)$/);f=new RegExp(y[1],y[2])}else if(/^this\./.test(f)){const y=f.replace(/^this\./,"");f=this._getControllerValue(y)}return!!f&&!!f.replace&&(f=f.replace(/\'/g,"")),f}):[];return{funcName:a,funcArgs:b,funcArgsStr:h}}async _funcExe(s,n){try{if(/\./.test(s)){const i=s.split(".");let l=this;for(const a of i)l=l[a];await l(...n)}else{if(!this[s])throw new Error(`Method "${s}" is not defined in the "${this.constructor.name}" controller.`);await this[s](...n)}}catch(i){console.error(i)}}async _funcsExe(s,n,i){const l=s.split(";").filter(a=>!!a).map(a=>a.trim());for(const a of l){const{funcName:h,funcArgs:b}=this._funcParse(a,n,i);await this._funcExe(h,b)}}async _statementExe(s){try{const n=s.split("="),i=n[0].trim(),l=n[1].trim().replace(/\'|\"|\`/g,"");this.$model[i]=l}catch(n){console.error(n)}}_genElem_create(s,n,i){s.style.display="none";let l=this._uid();const a=s.getAttribute(`${n}-id`);a?l=a:s.setAttribute(`${n}-id`,l);const h=s.cloneNode(!0);return h.removeAttribute(n),h.setAttribute(`${n}-gen`,i),h.setAttribute(`${n}-id`,l),h.style.display="",s.parentNode.insertBefore(h,s.nextSibling),h}_genElem_remove(s,n,i){const l=s.getAttribute(`${n}-id`),a=`[${n}-gen="${i}"][${n}-id="${l}"]`,h=document.querySelectorAll(a);for(const b of h)b.remove()}_setElementValue(s,n=""){typeof n=="object"&&(s.type==="textarea"?n=JSON.stringify(n,null,2):n=JSON.stringify(n)),s.value=n,s.setAttribute("value",n)}_getElementValue(s,n=!0){let i;if(s.type==="checkbox"){const l=document.querySelectorAll(`[name="${s.name}"]`),a=[];let h=1;for(const b of l){let f=b.value;n&&(f=this._typeConvertor(b.value)),b.checked&&(a.push(f),i=a),h===l.length&&!i&&(i=[]),h++}}else if(s.type==="select-multiple"){const l=s.selectedOptions,a=[];let h=1;for(const b of l){let f=b.value;n&&(f=this._typeConvertor(b.value)),a.push(f),i=a,h===l.length&&!i&&(i=[]),h++}}else if(s.type==="radio"){let l=s.value;n&&(l=this._typeConvertor(s.value)),s.checked&&(i=l)}else if(s.type==="number")i=s.valueAsNumber;else if(s.type==="password")i=s.value;else if(s.type==="file"&&s.multiple)i=s.files;else if(s.type==="file")i=s.files[0];else{let l=s.value;n&&(l=this._typeConvertor(s.value)),i=l}return i}_removeParentElements(s,n){let i=document.querySelectorAll(`[${s}]`);if(!!n&&typeof n=="string")i=document.querySelectorAll(`[${s}^="${n}"]`);else if(!!n&&n instanceof RegExp){const l=[];for(const a of i){const h=a.getAttribute(s);n.test(h)&&l.push(a)}i=l}for(const l of i){const a=l.parentNode;a.hasAttribute(`${s}-gen`)&&a.remove()}}_listElements(s,n){let i=document.querySelectorAll(`[${s}]`);if(!!n&&typeof n=="string")i=document.querySelectorAll(`[${s}^="${n}"]`);else if(!!n&&n instanceof RegExp){const a=[];for(const h of i){const b=h.getAttribute(s);n.test(b)&&a.push(h)}i=a}const l=[];for(const a of i){const h=a.getAttribute(s);/\.\$i\d+\./.test(h)||l.push(a)}return l}_sortElementsByPriority(s,n){const i=T(a=>{const b=a.getAttribute(n).split(this.$rg.separator);return+(b[1]?b[1].trim():0)},"getPriority");let l=[];for(const a of s){const h=i(a);l.push({elem:a,priority:h})}return l=l.sort((a,h)=>{const b=a.priority;return h.priority-b}),s=l.map(a=>a.elem),s}_uid(){const n=(Date.now()/1e3+"").split(".")[1],i=Math.round(Math.random()*1e3);return n+"-"+i}_debug(s,n,i,l){return this.$debugOpts[s]&&console.log(`%c ${n}`,`color: ${i}; background: ${l}`),this.$debugOpts}_printError(s){const n=s.message,i=s.stack.replace(/\n/g,"<br>");document.body.innerHTML=`
      <div style="margin:0px 13px;">
        <h5 style="color:Gray">Page Error</h5>
        <b style="color:Red;font:14px Verdana;">${n}</b>
        <br><span style="color:Gray;font:12px Verdana;">${i}</span>
      </div>
    `,console.error(s)}}T(Aux,"Aux");const __WEBPACK_DEFAULT_EXPORT__=Aux},242:(s,n,i)=>{i.d(n,{Z:()=>y});var l=i(835),a=i(719);class h extends l.Z{constructor(){super()}async rgKILL(){this._debug("rgKILL",`------- rgKILL (start) ctrl: ${this.constructor.name} -------`,"orange","#FFD8B6");const g=[];let u=1;for(const c of this.$rg.listeners)c.elem.removeEventListener(c.eventName,c.handler),this._debug("rgKILL",`${u}. killed:: ${c.attrName} --- ${c.eventName} --- ${c.elem.localName} -- ${c.elem.innerHTML} -- ctrl:: ${this.constructor.name}`,"orange"),g.push(Promise.resolve(!0)),u++;await Promise.all(g),this.$rg.listeners=[],this._debug("rgKILL","------- rgKILL (end) -------","orange","#FFD8B6")}rgHref(){this._debug("rgHref","--------- rgHref ------","orange","#F4EA9E");const g="data-rg-href",u=this._listElements(g,"");if(this._debug("rgHref",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=T(async k=>{k.preventDefault();const v=c.getAttribute("data-rg-href")||c.getAttribute("href")||"",S=v.trim(),w={href:v},$=c.innerText?c.innerText.trim():"";S&&a.Z.goto(S,w,$),this._debug("rgHref",`Executed rgHref listener -->  href: ${v}, ctrl:: ${this.constructor.name}`,"orangered")},"handler"),p="click";c.addEventListener(p,d),this.$rg.listeners.push({attrName:g,elem:c,handler:d,eventName:p}),this._debug("rgHref",`pushed::  tag: ${c.localName} | href="${c.pathname}" | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgClick(){this._debug("rgClick","--------- rgClick ------","orange","#F4EA9E");const g="data-rg-click",u=this._listElements(g,"");if(this._debug("rgClick",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=c.getAttribute(g);if(!d){console.error(`Attribute "data-rg-click" has bad definition (data-rg-click="${d}").`);continue}const p=d.split(this.$rg.separator),k=p[0],v=!!p[1]&&p[1].trim()==="preventDefault",S=T(async $=>{v&&$.preventDefault(),/\w\s*\=\s*[a-zA-z0-9\'\"]+/.test(k)?await this._statementExe(k):await this._funcsExe(k,c,$),this._debug("rgClick",`Executed rgClick listener --> ${k} | preventDefault: ${v}`,"orangered")},"handler"),w="click";c.addEventListener(w,S),this.$rg.listeners.push({attrName:g,elem:c,handler:S,eventName:w}),this._debug("rgClick",`pushed::  tag: ${c.localName} | data-rg-click="${d}" | preventDefault: ${v} | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgKeyup(){this._debug("rgKeyup","--------- rgKeyup ------","orange","#F4EA9E");const g="data-rg-keyup",u=this._listElements(g,"");if(this._debug("rgKeyup",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=c.getAttribute(g),p=d.split(this.$rg.separator);if(!p[0]){console.error(`Attribute "data-rg-keyup" has bad definition (data-rg-keyup="${d}").`);continue}const k=p[0];let v=p[1]||"";v=v.trim().toLowerCase();const S=T(async $=>{let O;if($.code&&(O=$.code.toLowerCase()),!!v&&v!==O)return;/\w\s*\=\s*[a-zA-z0-9\'\"]+/.test(k)?await this._statementExe(k):await this._funcsExe(k,c,$),this._debug("rgKeyup",`Executed rgKeyup listener --> ${k} | eventCode: ${O}`,"orangered")},"handler"),w="keyup";c.addEventListener(w,S),this.$rg.listeners.push({attrName:g,elem:c,handler:S,eventName:w}),this._debug("rgKeyup",`pushed::  tag: ${c.localName} | data-rg-keyup="${d}" | ctrl="${this.constructor.name}" | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgChange(){this._debug("rgChange","--------- rgChange ------","orange","#F4EA9E");const g="data-rg-change",u=this._listElements(g,"");if(this._debug("rgChange",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=c.getAttribute(g);if(!d){console.error(`Attribute "data-rg-change" has bad definition (data-rg-change="${d}").`);continue}const p=d,k=T(async S=>{/\w\s*\=\s*[a-zA-z0-9\'\"]+/.test(p)?await this._statementExe(p):await this._funcsExe(p,c,S),this._debug("rgChange",`Executed rgChange listener --> ${p}`,"orangered")},"handler"),v="change";c.addEventListener(v,k),this.$rg.listeners.push({attrName:g,elem:c,handler:k,eventName:v}),this._debug("rgChange",`pushed::  tag: ${c.localName} | data-rg-change="${d}" | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgEvt(){this._debug("rgEvt","--------- rgEvt ------","orange","#F4EA9E");const g="data-rg-evt",u=this._listElements(g,"");if(this._debug("rgEvt",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=c.getAttribute(g).trim(),p=d.split("&&");for(const k of p){const v=k.split(this.$rg.separator);if(!v[0]||!v[1]){console.error(`Attribute "data-rg-evt" has bad definition (data-rg-evt="${d}").`);continue}const S=v[0].trim(),w=v[1],$=T(async O=>{/\w\s*\=\s*[a-zA-z0-9\'\"]+/.test(w)?await this._statementExe(w):await this._funcsExe(w,c,O),this._debug("rgEvt",`Executed rgEvt listener --> ${w}`,"orangered")},"handler");c.addEventListener(S,$),this.$rg.listeners.push({eventName:S,attrName:g,elem:c,handler:$,eventName:S}),this._debug("rgEvt",`pushed::  tag: ${c.localName} | data-rg-evt | event: ${S} | rgListeners: ${this.$rg.listeners.length}`,"orange")}}}rgSet(){this._debug("rgSet","--------- rgSet ------","orange","#F4EA9E");const g="data-rg-set",u=this._listElements(g,"");if(this._debug("rgSet",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=c.getAttribute(g);if(!d){console.error(`Attribute "data-rg-set" has bad definition (data-rg-set="${d}").`);continue}const p=d.split(this.$rg.separator),k=p[0].trim(),S=(p[1]?p[1].trim():"")!=="convertTypeDont",w=T(O=>{const L=this._getElementValue(c,S);this._setControllerValue(k,L),this._debug("rgSet",`Executed rgSet listener --> controller property:: ${k} = ${L}`,"orangered")},"handler"),$="input";c.addEventListener($,w),this.$rg.listeners.push({attrName:g,elem:c,handler:w,eventName:$}),this._debug("rgSet",`pushed::  <${c.localName} ${g}="${d}"> | rgListeners: ${this.$rg.listeners.length}`,"orange")}}rgModel(){this._debug("rgModel","--------- rgModel ------","orange","#F4EA9E");const g="data-rg-model",u=this._listElements(g,"");if(this._debug("rgModel",`found elements:: ${u.length}`,"orange"),!!u.length)for(const c of u){const d=c.getAttribute(g);if(!d){console.error(`Attribute "data-rg-model" has bad definition (data-rg-model="${d}").`);continue}const p=d.split(this.$rg.separator),k=p[0].replace("$model.","").trim(),S=(p[1]?p[1].trim():"")!=="convertTypeDont",w=this._getModelValue(k);this._setElementValue(c,w),this._debug("rgModel",`rgModel set element value  --> controller property:: ${k} = ${w} | elem.type:: ${c.type}`,"orangered");const $=T(L=>{const x=this._getElementValue(c,S);this._setModelValue(k,x),this._debug("rgModel",`Executed rgModel listener --> controller property:: ${k} = ${x}`,"orangered")},"handler"),O="input";c.addEventListener(O,$),this.$rg.listeners.push({attrName:g,elem:c,handler:$,eventName:O}),this._debug("rgModel",`rgModel listener -- pushed::  <${c.localName} ${g}="${d}"> -- rgListeners: ${this.$rg.listeners.length}`,"orange")}}}T(h,"DataRgListeners");const b=h;class f extends b{constructor(){super(),this.$rg={separator:"@@",elems:{},listeners:[],varnameChars:"[a-zA-Z\\d\\$\\_\\.]+"}}rgSetinitial(){this._debug("rgSetinitial","--------- rgSetinitial ------","navy","#B6ECFF");const g="data-rg-setinitial",u=this._listElements(g,"");if(this._debug("rgSetinitial",`found elements:: ${u.length}`,"navy"),!!u.length)for(const c of u){const d=c.getAttribute(g)||"";if(!d){console.error(`rgSetinitial Error:: Attribute has bad definition (data-rg-setinitial="${d}").`);continue}const p=d.split(this.$rg.separator),k=p[0].trim(),S=(p[1]?p[1].trim():"")!=="convertTypeDont",w=this._getElementValue(c,S);this._setControllerValue(k,w),this._debug("rgSetinitial",`elem.type:: ${c.type} -- set initial --> ${k}:: ${w}`,"navy")}}rgFor(g){this._debug("rgFor","--------- rgFor (start) ------","navy","#B6ECFF");const u="data-rg-for";this._removeParentElements(u,g);let c=this._listElements(u,g);if(c=this._sortElementsByPriority(c,u),this._debug("rgFor",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u),k=p.split(this.$rg.separator),v=k[1]?k[1].trim():0,S=k[0].trim(),w=this._getControllerValue(S);if(this._genElem_remove(d,u,p),this._debug().rgFor&&console.log("rgFor -->","attrVal::",p," | val::",w," priority::",v),!w||!!w&&!w.length){d.style.display="none";continue}const $=this._genElem_create(d,u,p),O=w.length;for(let L=1;L<=O;L++){const x=O-L;d.parentNode.insertBefore($,d.nextSibling);let M=this._solve_$i(x,$.outerHTML,v);M=this._solveInterpolated(M),M=this._solveMath(M),$.outerHTML=M}}this._debug("rgFor","--------- rgFor (end) ------","navy","#B6ECFF")}}rgRepeat(g){this._debug("rgRepeat","--------- rgRepeat (start) ------","navy","#B6ECFF");const u="data-rg-repeat",c=this._listElements(u,g);if(this._debug("rgRepeat",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u),k=p.trim(),v=+this._getControllerValue(k);this._debug("rgRepeat",`Element will be repeated ${v} times.`,"navy"),this._genElem_remove(d,u,p);const S=this._genElem_create(d,u,p),w=+v;for(let $=1;$<=w;$++){const O=w-$;d.parentNode.insertBefore(S,d.nextSibling);let L=this._solve_$i(O,S.outerHTML);L=this._solveInterpolated(L),L=this._solveMath(L),S.outerHTML=L}}this._debug("rgRepeat","--------- rgRepeat (end) ------","navy","#B6ECFF")}}rgPrint(g){this._debug("rgPrint","--------- rgPrint (start) ------","navy","#B6ECFF");const u="data-rg-print",c=this._listElements(u,g);if(this._debug("rgPrint",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u),k=p.split(this.$rg.separator),v=k[0].trim(),S=v.split("|"),w=S[0].trim();let $=this._getControllerValue(w);const O=k[2]?k[2].trim()==="keep":!1;$===void 0?$=O?d.innerHTML:"":typeof $=="object"?$=JSON.stringify($):typeof $=="number"?$=+$:typeof $=="string"?$=$:typeof $=="boolean"?$=$.toString():$=$;let L=S[1];if(!!L&&!!$){L=L.trim();const{funcName:B,funcArgs:V}=this._funcParse(L,d);typeof $[B]=="function"&&($=$[B](...V))}let x=k[1]||"inner";x=x.trim(),this._genElem_remove(d,u,p);let M;if(x!=="inner"&&(M=this._genElem_create(d,u,p)),x==="inner")d.innerHTML=$;else if(x==="outer"){const B=M.getAttribute("data-rg-print-id");M.outerHTML=`<span data-rg-print-gen="${p}" data-rg-print-id="${B}">${$}</span>`}else if(x==="sibling"){d.style.display="";const B=M.getAttribute("data-rg-print-id");M.outerHTML=`<span data-rg-print-gen="${p}" data-rg-print-id="${B}">${$}</span>`}else x==="prepend"?M.innerHTML=$+" "+d.innerHTML:x==="append"?M.innerHTML=d.innerHTML+" "+$:x==="inset"?M.innerHTML=d.innerHTML.replace("{{}}",$):d.innerHTML=$;this._debug("rgPrint",`rgPrint:: ${v} = ${$} -- act::"${x}" -- toKeep::${O}`,"navy")}this._debug("rgPrint","--------- rgPrint (end) ------","navy","#B6ECFF")}}rgIf(g){this._debug("rgIf","--------- rgIf (start) ------","navy","#B6ECFF");const u="data-rg-if",c=this._listElements(u,g);if(this._debug("rgIf",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u).trim();if(!p){console.error(`Attribute "data-rg-if" has bad definition (data-rg-if="${p}").`);continue}const v=p.trim().split(/\s+\$/),S=v[0].trim(),w=this._getControllerValue(S),$=v[1]?"$"+v[1].trim():void 0;let O=!!w;if($){const{funcName:L,funcArgs:x}=this._funcParse($,d);O=this._calcComparison(w,L,x)}else O=!!w;if(O){const L=d.getAttribute("data-rg-print");!!L&&/outer|sibling|prepend|append|inset/.test(L)?d.style.display="none":d.style.display=""}else d.style.display="none";this._debug("rgIf",`rgIf:: <${d.tagName} data-rg-if="${p}"> & val=(${typeof w}) ${w} => tf: ${O} -- outerHTML: ${d.outerHTML}`,"navy")}this._debug("rgIf","--------- rgIf (end) ------","navy","#B6ECFF")}}rgSpinner(g){this._debug("rgSpinner","--------- rgSpinner (start) ------","navy","#B6ECFF");const u="data-rg-spinner",c=this._listElements(u,g);if(this._debug("rgSpinner",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u).trim();if(!p){console.error(`Attribute "data-rg-spinner" has bad definition (data-rg-spinner="${p}").`);continue}const v=p.trim().split(/\s+\$/),S=v[0].trim(),w=this._getControllerValue(S),$=v[1]?"$"+v[1].trim():void 0;let O=!!w;if($){const{funcName:L,funcArgs:x}=this._funcParse($,d);O=this._calcComparison(w,L,x)}else O=!!w;if(O){const L=`
        <span data-rg-spinner-gen>
          <style scoped>
            [data-rg-spinner]>span:after {
              content: '';
              display: block;
              font-size: 10px;
              width: 1em;
              height: 1em;
              margin-top: -0.5em;
              animation: spinner 1500ms infinite linear;
              border-radius: 0.5em;
              box-shadow: #BEBEBE 1.5em 0 0 0, #BEBEBE 1.1em 1.1em 0 0, #BEBEBE 0 1.5em 0 0, #BEBEBE -1.1em 1.1em 0 0, #BEBEBE -1.5em 0 0 0, #BEBEBE -1.1em -1.1em 0 0, #BEBEBE 0 -1.5em 0 0, #BEBEBE 1.1em -1.1em 0 0;
            }
            @-webkit-keyframes spinner {
              0% { transform: rotate(0deg);}
              100% { transform: rotate(360deg); }
            }
            @-moz-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @-o-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        </span>
        `;d.insertAdjacentHTML("beforeend",L);const x=d.getBoundingClientRect(),M=d.querySelector("span[data-rg-spinner-gen]");M.style.position="relative";const B=x.width/2;M.style.left=B+"px";const V=x.height/2;M.style.top=V+"px",this._debug("rgSpinner",`spinner position:: x=${B}px , y=${V}px`,"navy")}else d.innerHTML="";this._debug("rgSpinner",`rgSpinner:: <${d.tagName} data-rg-spinner="${p}"> & val=(${typeof w}) ${w} => tf: ${O}`,"navy")}this._debug("rgSpinner","--------- rgSpinner (end) ------","navy","#B6ECFF")}}rgSwitch(g){this._debug("rgSwitch","--------- rgSwitch (start) ------","navy","#B6ECFF");const u="data-rg-switch",c=this._listElements(u,g);if(this._debug("rgSwitch",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u)||"",k=p.split(this.$rg.separator),v=k[1]?k[1].trim()==="multiple":!1,S=k[0].trim(),w=this._getControllerValue(S),$=d.querySelectorAll("[data-rg-switch] > [data-rg-switchcase]"),O=d.querySelector("[data-rg-switch] > [data-rg-switchdefault]");let L=!1;for(const x of $){let M=x.getAttribute("data-rg-switchcase");M=M.trim(),!v&&M===w||v&&w&&w.indexOf(M)!==-1?(x.style.display="",L=!0):x.style.display="none",this._debug("rgSwitch",`data-rg-switch="${p}" data-rg-switchcase="${M}" --val:: "${w}" --isMatched: ${L}`,"navy")}O&&(L?O.style.display="none":O.style.display=""),this._debug("rgSwitch",`data-rg-switch="${p}" data-rg-switchdefault --isMatched: ${L}`,"navy")}this._debug("rgSwitch","--------- rgSwitch (end) ------","navy","#B6ECFF")}}rgDisabled(g){this._debug("rgDisabled","--------- rgDisabled (start) ------","navy","#B6ECFF");const u="data-rg-disabled",c=this._listElements(u,g);if(this._debug("rgDisabled",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length){for(const d of c){const p=d.getAttribute(u).trim();if(!p){console.error(`rgDisabled Error:: Attribute has bad definition (data-rg-disabled="${p}").`);continue}const v=p.trim().split(/\s+\$/),S=v[0].trim(),w=this._getControllerValue(S),$=v[1]?"$"+v[1].trim():void 0;let O=!!w;if($){const{funcName:L,funcArgs:x}=this._funcParse($,d);O=this._calcComparison(w,L,x)}else O=!!w;O?d.disabled=!0:d.disabled=!1,this._debug("rgDisabled",`rgDisabled:: data-rg-disabled="${p}" & val=${w} => tf: ${O} -- outerHTML: ${d.outerHTML}`,"navy")}this._debug("rgDisabled","--------- rgDisabled (end) ------","navy","#B6ECFF")}}rgValue(g){this._debug("rgValue","--------- rgValue ------","navy","#B6ECFF");const u="data-rg-value",c=this._listElements(u,g);if(this._debug("rgValue",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u);if(!p){console.error(`rgValue Error:: Attribute has bad definition (data-rg-value="${p}").`);continue}const k=p.trim(),v=this._getControllerValue(k);this._setElementValue(d,v),this._debug("rgValue",`elem.type:: ${d.type} -- ${k}:: ${v}`,"navy")}}rgChecked(g){this._debug("rgChecked","--------- rgChecked ------","navy","#B6ECFF");const u="data-rg-checked",c=this._listElements(u,g);if(this._debug("rgChecked",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u);if(!p){console.error(`rgChecked Error:: Attribute has bad definition (data-rg-checked="${p}").`);continue}const k=p.trim(),v=this._getControllerValue(k);if(!Array.isArray(v)){console.error(`rgChecked Error:: The controller property ${k} is not array.`);continue}v.indexOf(d.value)!==-1?d.checked=!0:d.checked=!1,this._debug("rgChecked",`elem.type:: ${d.type} -- ${k}:: ${v}`,"navy")}}rgClass(g){this._debug("rgClass","--------- rgClass ------","navy","#B6ECFF");const u="data-rg-class",c=this._listElements(u,g);if(this._debug("rgClass",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u)||"",k=p.split(this.$rg.separator),v=k[0].trim(),S=this._getControllerValue(v)||[];if(!Array.isArray(S)){console.log(`%c rgClassWarn:: The controller property "${v}" is not an array.`,"color:Maroon; background:LightYellow");continue}let w=k[1]||"";w=w.trim()||"add",w=="replace"&&!!S.length&&d.removeAttribute("class");for(const $ of S)d.classList.add($);this._debug("rgClass",`data-rg-class="${p}" --- ctrlProp:: ${v} | ctrlVal:: ${S} | act:: ${w}`,"navy")}}rgStyle(g){this._debug("rgStyle","--------- rgStyle ------","navy","#B6ECFF");const u="data-rg-style",c=this._listElements(u,g);if(this._debug("rgStyle",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u)||"",k=p.split(this.$rg.separator),v=k[0].trim(),S=this._getControllerValue(v);let w=k[1]||"";w=w.trim()||"add",w=="replace"&&d.removeAttribute("style");let $=[];if(S){$=Object.keys(S);for(const O of $)d.style[O]=S[O]}this._debug("rgStyle",`data-rg-style="${p}" --- prop:: "${v}" | styleProps:: "${$}" | act:: "${w}"`,"navy")}}rgSrc(g){this._debug("rgSrc","--------- rgSrc ------","navy","#B6ECFF");const u="data-rg-src",c=this._listElements(u,g);if(this._debug("rgSrc",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u)||"",k=p.split(this.$rg.separator),v=k[0].trim(),S=this._getControllerValue(v);let w=k[1]||"";w=w.trim();const $=S||w;d.src=$,this._debug("rgSrc",`data-rg-src="${p}" --prop:: "${v}" --src:: "${$}"`,"navy")}}rgAttr(g){this._debug("rgAttr","--------- rgAttr ------","navy","#B6ECFF");const u="data-rg-attr",c=this._listElements(u,g);if(this._debug("rgAttr",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u)||"",k=p.split(this.$rg.separator),v=k[0].trim(),S=this._getControllerValue(v);if(!k[1]){console.error(`Attribute name is not defined in the ${u}="${p}".`);continue}const w=k[1].trim();d.setAttribute(w,S),this._debug("rgAttr",`data-rg-attr="${p}" --prop:: "${v}" --val:: "${S}" --> added ${w}="${S}"`,"navy")}}rgElem(g){this._debug("rgElem","--------- rgElem ------","navy","#B6ECFF");const u="data-rg-elem",c=this._listElements(u,g);if(this._debug("rgElem",`found elements:: ${c.length} | attrValQuery:: ${g}`,"navy"),!!c.length)for(const d of c){const p=d.getAttribute(u)||"";this.$rg.elems[p]=d}}rgEcho(){this._debug("rgEcho","--------- rgEcho (start) ------","navy","#B6ECFF");const g="data-rg-echo",u=this._listElements(g,"");if(this._debug("rgEcho",`found elements:: ${u.length}`,"navy"),!!u.length){for(const c of u){let d=c.getAttribute("data-rg-echo");this._debug("rgEcho",`rgEcho txt before: ${d}`,"navy","#B6ECFF"),d=this._solveInterpolated(d),d=this._solveMath(d),d=d.replace(/\[/g,"<").replace(/\]/g,">"),this._debug("rgEcho",`rgEcho txt after: ${d}
`,"navy","#B6ECFF"),c.innerHTML=d}this._debug("rgEcho","--------- rgEcho (end) ------","navy","#B6ECFF")}}rgI18n(){}}T(f,"DataRg");const y=f},961:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _DataRg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(242);class View extends _DataRg_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(){super()}async rgInc(s=!0){const n=document.querySelectorAll("[data-rg-inc]:not([data-rg-cin])");if(this._debug("rgInc","--------- rgInc ------","#8B0892","#EDA1F1"),this._debug("rgInc",`elems found: ${n.length}`,"#8B0892"),!!n.length){if(s){const i=document.querySelectorAll("[data-rg-incgen]");this._debug("rgInc",`data-rg-incgen elems deleted: ${i.length}`,"#8B0892");for(const l of i)l.remove()}for(const i of n){const a=i.getAttribute("data-rg-inc").replace(/\s+/g,"").replace(/^\//,"").split(this.$rg.separator),h=!!a&&!!a.length?"inc/"+a[0]:"",b=!!a&&a.length>=2?a[1]:"inner",f=!!a&&a.length===3?a[2]:"";if(this._debug().rgInc&&console.log(`
******** path_dest_cssSel:: `,h,b,f,"********"),!h){console.error("viewPath is not defined");return}let y,C;if(!!window&&!!window.regochWeber&&!!window.regochWeber.viewsCached&&!!window.regochWeber.viewsCached[h]){const g=this.fetchCachedView(h,f);y=g.nodes,C=g.str,this._debug("rgInc","--from cached JSON","#8B0892")}else{const g=await this.fetchRemoteView(h,f);y=g.nodes,C=g.str,this._debug("rgInc","--from server","#8B0892")}if(this._debug().rgInc&&(console.log("elem::",i),console.log("nodes loaded::",y)),b==="inner")i.innerHTML=C;else if(b==="outer")i.outerHTML=C;else if(b==="sibling"){const g=i.parentNode,u=i.nextSibling;for(const c of y){if(!c)return;const d=c.cloneNode(!0);d.nodeType===1&&(d.setAttribute("data-rg-incgen",""),i.hasAttribute("data-rg-cin")||g.insertBefore(d,u))}}else if(b==="prepend"){const g=y.length;for(let u=y.length-1;u>=0;u--){if(!!y.length&&!y[u])return;const c=y[u].cloneNode(!0);c.nodeType===1&&(c.setAttribute("data-rg-incgen",""),i.hasAttribute("data-rg-cin")||i.prepend(c))}}else if(b==="append")for(const g of y){if(!g)return;const u=g.cloneNode(!0);u.nodeType===1&&(u.setAttribute("data-rg-incgen",""),i.hasAttribute("data-rg-cin")||i.append(u))}i.setAttribute("data-rg-cin",""),/data-rg-inc/.test(C)&&await this.rgInc(!1)}}}async loadView(s,n,i="inner",l){const a=`[data-rg-view="${s}"]`,h=document.querySelector(a);if(this._debug("loadView",`--------- loadView ${a} -- ${n} ---------`,"#8B0892","#EDA1F1"),this._debug().loadView&&console.log("elem::",h),!h)throw new Error(`Element ${a} not found.`);if(!n)throw new Error("View path is not defined.");let b,f;if(!!window&&!!window.regochWeber&&!!window.regochWeber.viewsCached&&!!window.regochWeber.viewsCached[n]){const y=this.fetchCachedView(n,l);b=y.nodes,f=y.str,this._debug("loadView","--from cached JSON","#8B0892")}else{const y=await this.fetchRemoteView(n,l);b=y.nodes,f=y.str,this._debug("loadView","--from server","#8B0892")}if(this._debug().loadView&&console.log("nodes loaded::",b),this.emptyView(s,i),i==="inner")h.innerHTML=f;else if(i==="outer")h.outerHTML=f;else if(i==="sibling"){const y=h.parentNode,C=h.nextSibling;for(const g of b){const u=g.cloneNode(!0);u.nodeType===1&&(u.setAttribute("data-rg-viewgen",s),y.insertBefore(u,C))}}else if(i==="prepend"){const y=b.length;for(let C=b.length-1;C>=0;C--){const g=b[C].cloneNode(!0);g.nodeType===1&&(g.setAttribute("data-rg-viewgen",s),h.prepend(g))}}else if(i==="append")for(const y of b){const C=y.cloneNode(!0);C.nodeType===1&&(C.setAttribute("data-rg-viewgen",s),h.append(C))}return{elem:h,str:f,nodes:b}}async loadViews(s,n=!0){for(const i of s){const l=i[0],a=i[1],h=i[2],b=i[3];n?await this.loadView(l,a,h,b):this.loadView(l,a,h,b)}}emptyView(s,n="inner"){const i=`[data-rg-view="${s}"]`,l=document.querySelector(i);if(this._debug("emptyView",`--------- emptyView ${i} | ${n} ---------`,"#8B0892","#EDA1F1"),this._debug().emptyView&&console.log("elem::",l),!!l){if(n==="inner")l.innerHTML="";else if(n==="outer")l.outerHTML="";else if(n==="sibling")for(const a of document.querySelectorAll(`[data-rg-viewgen="${s}"`))a.remove();else if(n==="prepend")for(const a of document.querySelectorAll(`[data-rg-viewgen="${s}"`))a.remove();else if(n==="append")for(const a of document.querySelectorAll(`[data-rg-viewgen="${s}"`))a.remove()}}showViews(s,n){if(!n){s?document.body.style.visibility="visible":document.body.style.visibility="hidden";return}for(const a of document.body.childNodes)a.nodeType===1&&(s?a.style.visibility="visible":a.style.visibility="hidden");const i=document.createElement("div");i.setAttribute("data-rg-spinner-showviews","");const l=`
        <span>
          <style scoped>
            [data-rg-spinner-showviews]>span:after {
              content: '';
              display: block;
              font-size: 13px;
              width: 1em;
              height: 1em;
              margin-top: 55px;
              margin-left: auto;
              margin-right: auto;
              animation: spinner 1500ms infinite linear;
              border-radius: 0.5em;
              box-shadow: #BEBEBE 1.5em 0 0 0, #BEBEBE 1.1em 1.1em 0 0, #BEBEBE 0 1.5em 0 0, #BEBEBE -1.1em 1.1em 0 0, #BEBEBE -1.5em 0 0 0, #BEBEBE -1.1em -1.1em 0 0, #BEBEBE 0 -1.5em 0 0, #BEBEBE 1.1em -1.1em 0 0;
            }
            @-webkit-keyframes spinner {
              0% { transform: rotate(0deg);}
              100% { transform: rotate(360deg); }
            }
            @-moz-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @-o-keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            @keyframes spinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        </span>
        `;if(i.insertAdjacentHTML("beforeend",l),s){const a=document.querySelector("[data-rg-spinner-showviews]");document.body.removeChild(a)}else document.body.prepend(i)}fetchCachedView(s,n){const l=new DOMParser().parseFromString(window.regochWeber.viewsCached[s],"text/html");let a,h;if(!n)a=/\<title|\<meta|\<link\<base/.test(window.regochWeber.viewsCached[s])?l.head.childNodes:l.body.childNodes,h=window.regochWeber.viewsCached[s];else{const b=l.querySelector(n);a=[b],h=b?b.outerHTML:""}return{nodes:a,str:h}}async fetchRemoteView(s,n){const i=`/client/views/${s}`,l=new URL(i,this.$baseURIhost).toString(),a=await this.$httpClient.askHTML(l,n),h=a.res.content;if(a.status!==200||!h)throw new Error(`Status isn't 200 or content is empty for ${s}`);const b=a.res.content.nodes,f=a.res.content.str;return{nodes:b,str:f}}async lazyJS(s,n=0){if(!!s)for(const i of s){await new Promise(h=>setTimeout(h,n)),document.body.querySelectorAll(`script[src="${i}"]`).length&&this.unlazyJS([i]);const a=document.createElement("script");a.type="text/javascript",a.src=i,a.defer=!0,a.setAttribute("data-rg-lazyjs",""),document.body.appendChild(a)}}unlazyJS(s){if(!!s)for(const n of s){const i=document.body.querySelectorAll(`script[src="${n}"][data-rg-lazyjs]`);for(const l of i)l&&l.remove()}}unlazyAllJS(){const s=document.querySelectorAll("script[data-rg-lazyjs]")||[];for(const n of s)n&&n.remove()}async loadJS(urls){if(!!urls)for(let url of urls){url=url.trim(),/^http/.test(url)||(url=new URL(url,this.$baseURIhost).toString());const jsContents=[],answer=await this.$httpClient.askJS(url);jsContents.push(answer.res.content);for(const jsContent of jsContents)eval(jsContent)}}async rgLazyjs(s=0){this._debug("rgLazyjs","--------- rgLazyjs ------","navy","#B6ECFF");const n="data-rg-lazyjs",i=document.querySelectorAll(`[${n}]`);if(this._debug("rgLazyjs",`found elements:: ${i.length}`,"navy"),!i.length)return;const l=[];for(const a of i){const h=a.getAttribute("src");this._debug("rgLazyjs",`  src="${h}"`,"navy"),l.push(h)}this.unlazyAllJS(),await this.lazyJS(l,s)}loadCSS(s){if(!!s)for(const n of s){document.body.querySelectorAll(`link[href="${n}"]`).length&&this.unloadCSS([n]);const l=document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("href",n),l.defer=!0,document.head.appendChild(l)}}unloadCSS(s){if(!!s)for(const n of s){const i=document.head.querySelectorAll(`link[rel="stylesheet"][href="${n}"]`);for(const l of i)l&&l.remove()}}addCSS(s,n){const i=document.createElement("style");i.textContent=s,i.setAttribute("type","text/css"),i.setAttribute("data-rg-ref",n),document.head.appendChild(i)}delCSS(s){const n=document.createElement(`style[data-rg-ref="${s}"]`);n&&n.remove()}setTitle(s){document.title=s}setDescription(s){const n=document.head.querySelector('meta[name="description"]');if(!n)throw new Error('The meta[name="description"] tag is not placed in the HTML file.');n.setAttribute("content",s)}setKeywords(s){const n=document.head.querySelector('meta[name="keywords"]');if(!n)throw new Error('The meta[name="keywords"] tag is not placed in the HTML file.');n.setAttribute("content",s)}setLang(s){document.querySelector("html").setAttribute("lang",s)}async loadHead(s,n="inner"){const i=document.querySelector("head");if(this._debug("loadHead",`--------- loadHead -- ${s} ---------`,"#8B0892","#EDA1F1"),this._debug().loadView&&console.log("elem::",i),!i)throw new Error("Element HEAD not found.");if(!s)throw new Error("View path is not defined.");let l,a;if(window.regochWeber.viewsCached[s]){const h=this.fetchCachedView(s);l=h.nodes,a=h.str,this._debug("loadHead","--from cached JSON","#8B0892")}else{const h=await this.fetchRemoteView(s);l=h.nodes,a=h.str,this._debug("loadHead","--from server","#8B0892")}this._debug().loadHead&&console.log("nodes::",l),this._debug().loadHead&&console.log("str::",a);for(const h of document.querySelectorAll("[data-rg-headgen"))h.remove();if(n==="inner")i.innerHTML=a;else if(n==="prepend"){const h=l.length;for(let b=l.length-1;b>=0;b--){const f=l[b].cloneNode(!0);f.nodeType===1&&(f.setAttribute("data-rg-headgen",""),i.prepend(f))}}else if(n==="append")for(const h of l){const b=h.cloneNode(!0);b.nodeType===1&&(b.setAttribute("data-rg-headgen",""),i.append(b))}return{elem:i,str:a,nodes:l}}}T(View,"View");const __WEBPACK_DEFAULT_EXPORT__=View}},__webpack_module_cache__={};function __webpack_require__(s){var n=__webpack_module_cache__[s];if(n!==void 0)return n.exports;var i=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s](i,i.exports,__webpack_require__),i.exports}T(__webpack_require__,"__webpack_require__"),__webpack_require__.d=(s,n)=>{for(var i in n)__webpack_require__.o(n,i)&&!__webpack_require__.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:n[i]})},__webpack_require__.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n),__webpack_require__.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var s={};__webpack_require__.r(s),__webpack_require__.d(s,{Auth:()=>$,Cookie:()=>S,Form:()=>x,HTTPClient:()=>f,Paginator:()=>B,eventEmitter:()=>O.Z,navig:()=>h.Z,util:()=>q});class n{constructor(e){this.routerOpts=e||{},this.trx,this.routeDefs=[]}set trx(e){if(!e.uri)throw new Error('The "uri" property is required.');Object.defineProperty(e,"uri",{value:e.uri,writable:!1}),Object.defineProperty(e,"body",{value:e.body,writable:!1}),e.uriParsed=this._uriParser(e.uri),this._trx=e}get trx(){return this._trx}when(e,...t){return this.routeDefs.push({route:e,routeParsed:this._routeParser(e),funcs:t}),this}redirect(e,t,r){const o=this.routeDefs.find(_=>_.route===t),m=o?o.funcs:[];return this.when(e,r,...m),this}notfound(...e){return this.when("<notfound>",...e),this}do(...e){return this.when("<do>",...e),this}async exe(){const e={...this.trx},t=e.uriParsed,r=this.routeDefs.find(_=>{const E=_.routeParsed;return this._routeRegexMatchNoParams(E,t)||this._routeWithParamsMatch(E,t)}),o=this.routeDefs.find(_=>_.route==="<notfound>"),m=this.routeDefs.find(_=>_.route==="<do>");if(r){e.routeParsed=r.routeParsed,e.query=t.queryObject,e.params=e.routeParsed?this._getParams(r.routeParsed.full,t.path):{};for(const _ of r.funcs)await _(e)}else if(o)for(const _ of o.funcs)await _(e);if(!!m&&!!m.funcs&&!!m.funcs.length)for(const _ of m.funcs)await _(e);return e}_routeRegexMatchNoParams(e,t){const o=new RegExp(`^${e.full}$`,"i").test(t.path),m=e.segments===t.segments,_=o&&m;return this.routerOpts.debug&&console.log(`
_routeRegexMatchNoParams:: (route) ${e.full} - (uri) ${t.path} -> ${_}`),_}_routeWithParamsMatch(e,t){const o=new RegExp(`^${e.base}/`,"i").test(t.path),m=e.segments===t.segments,_=/\/\:/.test(e.full),E=o&&m&&_;return this.routerOpts.debug&&console.log(`_routeWithParamsMatch:: (route) ${e.full} - (uri) ${t.path} -> ${E}`),E}_removeSlashes(e){return e.trim().replace(/^\/+/,"").replace(/\/+$/,"")}_typeConvertor(e){function t(r){try{JSON.parse(r)}catch{return!1}return!0}return T(t,"isJSON"),!!e&&!isNaN(e)&&e.indexOf(".")===-1?e=parseInt(e,10):!!e&&!isNaN(e)&&e.indexOf(".")!==-1?e=parseFloat(e):(e==="true"||e==="false"||t(e))&&(e=JSON.parse(e)),e}_toQueryObject(e){const t=e.split("&"),r={};let o,m,_;return t.forEach(E=>{o=E.split("="),m=o[0],_=o[1],_=this._typeConvertor(_),r[m]=_}),r}_uriParser(e){const t=e.split("?"),r=this._removeSlashes(t[0]),o=r.split("/").length,m=t[1],_=m?this._toQueryObject(m):{};return{path:r,segments:o,queryString:m,queryObject:_}}_routeParser(e){const t=this._removeSlashes(e),r=t.split("/").length,o=t.replace(/\/\:.+/,"");return{full:t,segments:r,base:o}}_getParams(e,t){const r=e.split("/"),o=t.split("/"),m={};return r.forEach((_,E)=>{if(/\:/.test(_)){const A=_.replace(/^\:/,"");let R=o[E];R=this._typeConvertor(R),m[A]=R}}),m}}T(n,"RegochRouter");const i=n;class l extends i{constructor(e,t){super({debug:t}),this.debugRouter=e}_when(e,t,r={}){const o=r.authGuards||[];if(!e&&!!t)throw new Error(`Route is not defined for "${t.constructor.name}" controller.`);if(!!e&&!t)throw new Error(`Controller is not defined for route "${e}".`);if(/autoLogin|isLogged|hasRole/.test(o.join())&&!t.$auth)throw new Error(`Auth guards (autoLogin, isLogged, hasRole) are used but Auth is not injected in the controller ${t.constructor.name}. Use App::controllerAuth().`);const m=T(F=>{F.ctrl=t},"assign_ctrl"),_=[];if(o.length&&t.$auth){const F=t.$auth.autoLogin.bind(t.$auth),P=t.$auth.isLogged.bind(t.$auth),N=t.$auth.hasRole.bind(t.$auth);o.indexOf("autoLogin")!==-1&&_.push(F),o.indexOf("isLogged")!==-1&&_.push(P),o.indexOf("hasRole")!==-1&&_.push(N)}const E=t.$preflight?t.$preflight:[],A=t.processing.bind(t),R=t.$postflight?t.$postflight:[];this.when(e,m,..._,...E,A,...R)}_notfound(e){const t=e.processing.bind(e);this.notfound(t)}_do(...e){this.do(...e)}_redirect(e,t){const r=T(()=>{window.history.pushState(null,"",t)},"cb");this.redirect(e,t,r)}async _exe(e){try{const t=new Date;let r=window.location.pathname+window.location.search;r=decodeURI(r),this.debugRouter&&console.log(`%c --------- router exe start --> ${r} ------`,"color:#680C72; background:#E59FED"),this.trx={uri:r,pevent:e};const o=await this.exe(),m=new Date;o.elapsedTime=m-t+" ms",this.debugRouter&&(console.log("Router trx::",o),console.log(`%c --------- router exe end --> elapsedTime: ${this.trx.elapsedTime} ------`,"color:#680C72; background:#E59FED"))}catch(t){/AuthWarn::/.test(t.message)?console.log(`%c${t.message}`,"color:#FF6500; background:#FFFEEE;"):console.error(t)}}}T(l,"Router");const a=l;var h=__webpack_require__(719);class b{constructor(e){this.url,this.protocol="http:",this.hostname="",this.port=80,this.pathname="/",this.queryString="",e?this.opts=e:this.opts={encodeURI:!1,timeout:8e3,responseType:"",retry:3,retryDelay:5500,maxRedirects:3,headers:{authorization:"",accept:"*/*","content-type":"text/html; charset=UTF-8"}},this.timeout=this.opts.timeout,this.responseType=this.opts.responseType,this.req_headers={...this.opts.headers},this.xhr=new XMLHttpRequest,this.interceptor}async askOnce(e,t="GET",r){const o={requestURL:e,requestMethod:t,status:0,statusMessage:"",https:!1,req:{headers:this.req_headers,payload:void 0},res:{headers:void 0,content:void 0},time:{req:this._getTime(),res:void 0,duration:void 0}};try{e=this._parseUrl(e),o.requestURL=e,o.https=/^https/.test(this.protocol)}catch(_){const E={...o};return E.status=400,E.statusMessage=_.message||"Bad Request",E.time.res=this._getTime(),E.time.duration=this._getTimeDiff(E.time.req,E.time.res),E}if(this.interceptor&&await this.interceptor(),this.xhr.open(t,e,!0,null,null),this._xhr_timeout(this.timeout),this._xhr_responseType(this.responseType),this._xhr_requestHeaders(this.req_headers),!!r&&!/GET/i.test(t)){o.req.payload=r;const _=this.req_headers["content-type"]||"";let E;/application\/json/.test(_)?E=JSON.stringify(r):E=r,this.xhr.send(E)}else this.xhr.send();return new Promise((_,E)=>{this.xhr.onload=A=>{const R={...o};R.status=this.xhr.status,R.statusMessage=this.xhr.statusText,R.res.headers=this.getResHeaders(),R.res.content=A.target.response,R.time.res=this._getTime(),R.time.duration=this._getTimeDiff(R.time.req,R.time.res),_(R)},this.xhr.onerror=A=>{this.kill();const R=this._formatError(A,e),F={...o};F.status=R.status,F.statusMessage=R.message,F.time.res=this._getTime(),F.time.duration=this._getTimeDiff(F.time.req,F.time.res),_(F)},this.xhr.ontimeout=()=>{this.kill();const A={...o};A.status=408,A.statusMessage=`Request aborted due to timeout (${this.opts.timeout} ms) ${e} `,A.time.res=this._getTime(),A.time.duration=this._getTimeDiff(A.time.req,A.time.res),_(A)}})}async ask(e,t="GET",r){let o=await this.askOnce(e,t,r);const m=[o];let _=1;for(;!!o&&/^3\d{2}/.test(o.status)&&_<=this.opts.maxRedirects;){const A=new URL(e,o.res.headers.location);console.log(`#${_} redirection ${o.status} from ${this.url} to ${A}`),o=await this.askOnce(A,t,r),m.push(o),_++}let E=1;for(;o.status===408&&E<=this.opts.retry;)console.log(`#${E} retry due to timeout (${this.opts.timeout}) on ${e}`),await new Promise(A=>setTimeout(A,this.opts.retryDelay)),o=await this.askOnce(e,t,r),m.push(o),E++;return m}async askJSON(e,t="GET",r){let o=r;if(!!r&&typeof r=="string")try{o=JSON.parse(r)}catch{throw new Error("Body string is not valid JSON.")}this.setReqHeaders({"content-type":"application/json; charset=utf-8",accept:"application/json"});const m=await this.askOnce(e,t,o);if(m.res.content)try{m.res.content=JSON.parse(m.res.content)}catch{throw new Error("Response content is not valid JSON.")}return m}async askHTML(e,t){const r=await this.askOnce(e),m=new DOMParser().parseFromString(r.res.content,"text/html");let _,E;if(!t)_=m.body.childNodes,E=r.res.content;else{const A=m.querySelector(t);_=[A],E=A?A.outerHTML:""}return r.res.content={nodes:_,str:E},r}async askJS(e){this.setReqHeaders({"content-type":"application/javascript; charset=utf-8",accept:"application/javascript"});const t=await this.askOnce(e,"GET");return t.res.content=t.res.content,t}async sendFormData(e,t){this.setReqHeaders({"content-type":"multipart/form-data",accept:"*/*"}),this.delReqHeaders(["content-type"]);const r=await this.askOnce(e,"POST",t);if(r.res.content)try{r.res.content=JSON.parse(r.res.content)}catch{console.log("WARNING: Response content is not JSON.")}return r}object2formdata(e){const t=new FormData;for(const[r,o]of Object.entries(e))t.set(r,o);return t}async sendForm(e,t,r="application/x-www-form-urlencoded"){let o="RegochWebHttpClient";o+=Math.floor(Math.random()*32768),o+=Math.floor(Math.random()*32768),o+=Math.floor(Math.random()*32768),console.log("boundary::",o);const m=`--${o}\r
Content-Disposition: form-data; name="db_id"\r
\r
12345\r
--${o}--`;return console.log("body::",m),await this.askOnce(e,"POST",t)}kill(){this.xhr.abort()}setInterceptor(e){this.interceptor=e.bind(this)}setReqHeaders(e){Object.keys(e).forEach(t=>{const r=t,o=e[t];this.setReqHeader(r,o)})}setReqHeader(e,t){e=e.toLowerCase(),this.req_headers[e]=t}delReqHeaders(e){e.forEach(t=>{delete this.req_headers[t]})}getReqHeaders(){return this.req_headers}getResHeaders(){const t=this.xhr.getAllResponseHeaders().split(`
`),r={};return t.forEach(o=>{const m=o.split(":"),_=m[0];if(_){const E=m[1].trim();r[_]=E}}),r}_parseUrl(e){e=this._correctUrl(e);const t=new URL(e);return this.url=e,this.protocol=t.protocol,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.queryString=t.search,e}_correctUrl(e){if(!e)throw new Error("URL is not defined");return e=e.trim(),/^https?:\/\//.test(e)||(e="http://"+e),this.opts.encodeURI?e=encodeURI(e):(e=e.replace(/\s+/g," "),e=e.replace(/ /g,"%20")),e}_formatError(e,t){const r=new Error(e);return e.target.status===0?(r.status=0,r.message=`Status:0 Bad Request ${t}`):(r.status=e.status||400,r.message=e.message),r.original=e,r}_getTime(){return new Date().toISOString()}_getTimeDiff(e,t){const r=new Date(e);return(new Date(t).getTime()-r.getTime())/1e3}_xhr_requestHeaders(e){Object.keys(e).forEach(t=>this.xhr.setRequestHeader(t.toLowerCase(),e[t]))}_xhr_timeout(e){this.xhr.timeout=+e||0}_xhr_responseType(e){this.xhr.responseType=e||"text"}}T(b,"HTTPClient");const f=b,y={warnings:!1,router:!1,regochRouter:!1,render:!1,navig:!1,rgInc:!1,loadView:!1,emptyView:!1,loadHead:!1,rgLazyjs:!1,rgFor:!1,rgRepeat:!1,rgPrint:!1,rgIf:!1,rgSpinner:!1,rgSwitch:!1,rgDisabled:!1,rgValue:!1,rgChecked:!1,rgClass:!1,rgStyle:!1,rgSrc:!1,rgAttr:!1,rgElem:!1,rgEcho:!1,rgKILL:!1,rgHref:!1,rgClick:!1,rgKeyup:!1,rgChange:!1,rgEvt:!1,rgSet:!1,rgModel:!1};window.regochWeber={};class C{constructor(){this.ctrls={},this.$debugOpts=y}controllers(e){for(const t of e){const r=new t(this);this.ctrls[t.name]=r}return this._httpClient(),this}_controllerProp(e,t){if(Object.keys(this.ctrls).length===0)throw new Error(`The controller property "${e}" should be defined after the method controllers().`);for(const o of Object.keys(this.ctrls))this.ctrls[o][e]=t;return this}_httpClient(){const e={encodeURI:!0,timeout:21e3,retry:0,retryDelay:1300,maxRedirects:0,headers:{authorization:"",accept:"*/*","content-type":"text/html; charset=UTF-8"}},t=new f(e);this._controllerProp("$httpClient",t);const r=`${window.location.protocol}//${window.location.host}`;return this._controllerProp("$baseURIhost",r),this}fridge(e,t){if(Object.keys(this.ctrls).length===0)throw new Error(`The $fridge property "${e}" should be defined after the method controllers().`);for(const o of Object.keys(this.ctrls))this.ctrls[o].$fridge[e]=t;return this}auth(e){this._controllerProp("$auth",e);for(const t of Object.keys(this.ctrls)){const r=this.ctrls[t].$auth;r.login=r.login.bind(r),r.logout=r.logout.bind(r),r.getLoggedUserInfo=r.getLoggedUserInfo.bind(r),r.setLoggedUserInfo=r.setLoggedUserInfo.bind(r),r.getJWTtoken=r.getJWTtoken.bind(r)}return this}preflight(...e){return this._controllerProp("$preflight",e),this}postflight(...e){return this._controllerProp("$postflight",e),this}routes(e){const t=new a(this.$debugOpts.router,this.$debugOpts.regochRouter);for(const r of e){if(!r||!!r&&!Array.isArray(r)||!!r&&!r.length)throw new Error(`Invalid route definition ${r}`);const o=r[0];if(o==="when"){const m=r[1],_=r[2],E=r[3];if(!this.ctrls[_])throw new Error(`Controller "${_}" is not defined or not injected in the App.`);const A=this.ctrls[_];t._when(m,A,E)}else if(o==="notfound"){const m=r[1];if(!this.ctrls[m])throw new Error(`Controller "${m}" is not defined or not injected in the App.`);const _=this.ctrls[m];t._notfound(_)}else if(o==="do"){const m=r.filter((_,E)=>{if(E!==0)return _});t._do(...m)}else if(o==="redirect"){const m=r[1],_=r[2];t._redirect(m,_)}}return t._exe(),h.Z.onUrlChange(r=>{t._exe(r)}),this}viewsCached(e){return window.regochWeber.viewsCached=e,this}debugger(e){return e&&(this.$debugOpts=e),this._controllerProp("$debugOpts",this.$debugOpts),this}onReady(e){window.onload=e}onDOMLoaded(e){document.addEventListener("DOMContentLoaded",e)}createDOMObserver(e){this.DOMObserver=new MutationObserver(e)}}T(C,"App");const g=C;var u=__webpack_require__(961);class c extends u.Z{constructor(){super(),this.$model={},this.$modeler={}}proxifyModel(){const e={set:(t,r,o)=>{const m=Reflect.set(t,r,o);return this.render("$model."+r),m}};this.$model=new Proxy(this.$model,e)}modeler(){this.$modeler.use=e=>({setValue:(r,o)=>{const m=o?`${e}.${o}`:e;this._setModelValue(m,r)},getValue:r=>{const o=r?`${e}.${r}`:e;return this._getModelValue(o)},mpush:r=>{this.$model[e].push(r),this.render("$model."+e)},mpop:()=>{this.$model[e].pop(),this.render("$model."+e)},munshift:r=>{this.$model[e].unshift(r),this.render("$model."+e)},mshift:()=>{this.$model[e].shift(),this.render("$model."+e)},mrender:()=>{this.render("$model."+e)}})}emptyModel(){this.$model={}}isModelEmpty(){return!Object.keys(this.$model).length}}T(c,"Model");const d=c;class p extends d{constructor(){super(),this.$debugOpts={},this.$fridge={},this.$navig=h.Z}async loader(e){}async init(e){}async rend(e){await this.render()}async postrend(e){}async destroy(e){}async processing(e){h.Z.setPrevious(),await h.Z.resetPreviousController(e),h.Z.setCurrent(this),this._debug().navig&&console.log("%c---navig---","color:green; background:#D9FC9B;",h.Z),this.emptyModel(),this.proxifyModel(),this.modeler();try{await this.loader(e)}catch(t){console.error(t)}await this.rgInc(!0),this.rgSetinitial();try{await this.init(e)}catch(t){console.error(t)}try{await this.rend(e)}catch(t){console.error(t)}try{await this.postrend(e)}catch(t){console.error(t)}await this.rgLazyjs()}async render(e,t=5){e&&(e=e.replace(/___.+$/,"")),this._debug("render",`--------- render (start) -- attrValQuery: ${e} -- renderDelay: ${t} -- ctrl: ${this.constructor.name} ------`,"green","#D9FC9B"),this.rgFor(e),this.rgRepeat(e),this.rgPrint(e),await new Promise(r=>setTimeout(r,t)),this.rgIf(e),this.rgSpinner(e),this.rgSwitch(e),this.rgDisabled(e),this.rgValue(e),this.rgChecked(e),this.rgClass(e),this.rgStyle(e),this.rgSrc(e),this.rgAttr(e),this.rgElem(e),this.rgEcho(),await new Promise(r=>setTimeout(r,t)),await this.rgKILL(),this.rgHref(),this.rgClick(),this.rgKeyup(),this.rgChange(),this.rgEvt(),this.rgSet(),this.rgModel(),this._debug("render",`--------- render (end) -- attrValQuery: ${e} ------`,"green","#D9FC9B")}async renders(e=[],t=5){for(const r of e)await this.render(r,t)}}T(p,"Controller");const k=p;class v{constructor(e,t){this.cookieOpts=e,this.debug=t}put(e,t){if(!document)throw new Error("The document is not available.");const r=encodeURIComponent(t);let o=`${e}=${r};`;o=this._appendCookieOptions(o),document.cookie=o,this.debug&&console.log("cookie-put():cookieStr: ",o)}putObject(e,t){if(!document)throw new Error("The document is not available.");const r=encodeURIComponent(JSON.stringify(t));let o=`${e}=${r};`;o=this._appendCookieOptions(o),document.cookie=o,this.debug&&console.log("cookie-putObject(): ",o)}getAll(){if(!document)throw new Error("The document is not available.");const e=document.cookie;return this.debug&&console.log("cookie-getAll(): ",e),e}get(e){if(!document)throw new Error("The document is not available.");const t=this._toCookiesArr();let r,o;return t.forEach(m=>{r=m.split("="),r[0]===e&&(o=r[1])}),o=decodeURIComponent(o),this.debug&&(console.log("cookie-get()-cookiesArr: ",t),console.log("cookie-get()-cookieVal: ",e,"=",o)),o}getObject(e){if(!document)throw new Error("The document is not available.");const t=this.get(e);let r=null;try{if(t!=="undefined"&&!!t){const o=decodeURIComponent(t);r=JSON.parse(o)}}catch(o){console.error("cookie-getObject(): ",o)}return this.debug&&(console.log("cookie-getObject():cookieVal: ",t),console.log("cookie-getObject():cookieObj: ",r)),r}remove(e){if(!document)throw new Error("The document is not available.");let t=new Date("1970-01-01T01:00:00");t=t.toUTCString(),document.cookie=`${e}=;expires=${t};path=/;`,this.debug&&console.log("cookie-remove(): ",e," cookie is deleted.")}removeAll(){if(!document)throw new Error("The document is not available.");let e=new Date("1970-01-01T01:00:00");e=e.toUTCString();const t=this._toCookiesArr();let r;const o=[];t.forEach(m=>{r=m.split("="),document.cookie=`${r[0]}=;expires=${e};path=/;`,o.push(document.cookie)}),this.debug&&(console.log("cookie-removeAll():before:: ",t),console.log("cookie-removeAll():after:: ",o))}exists(e){if(!document)throw new Error("The document is not available.");const t=this._toCookiesArr();let r,o=!1;return t.forEach(m=>{r=m.split("="),r[0]===e&&(o=!0)}),this.debug&&console.log("cookie-exists(): ",o),o}_appendCookieOptions(e){if(!this.cookieOpts)return e;if(this.cookieOpts.domain&&(e+=`domain=${this.cookieOpts.domain};`),this.cookieOpts.path&&(e+=`path=${this.cookieOpts.path};`),this.cookieOpts.expires){let t;if(typeof this.cookieOpts.expires=="number"){const o=new Date;o.setTime(o.getTime()+this.cookieOpts.expires*60*60*1e3),t=o.toUTCString()}else t=this.cookieOpts.expires.toUTCString();e+=`expires=${t};`}return this.cookieOpts.secure&&(e+="secure;"),this.cookieOpts.httpOnly&&(e+="HttpOnly;"),this.cookieOpts.sameSite&&(e+=`SameSite=${this.cookieOpts.sameSite};`),e}_toCookiesArr(){return document.cookie.split(";").map(o=>o.trim())}}T(v,"Cookie");const S=v;class w{constructor(e){this.authOpts=e;const t={path:"/",expires:5,secure:!1,httpOnly:!1,sameSite:"strict"};this.cookie=new S(t);const r={encodeURI:!1,timeout:8e3,retry:3,retryDelay:5500,maxRedirects:3,headers:{authorization:"",accept:"*/*","content-type":"text/html; charset=UTF-8"},responseType:""};this.httpClient=new f(r),this.jwtToken,this.loggedUser=this.getLoggedUserInfo()}async login(e){const t=this.authOpts.apiLogin,r=await this.httpClient.askJSON(t,"POST",e);if(r.status===200){const o=r.res.content;this.jwtToken=o.jwtToken,this.loggedUser=o.loggedUser,this.cookie.put("auth_jwtToken",o.jwtToken),this.cookie.putObject("auth_loggedUser",o.loggedUser);const m=this._correctURL(this.authOpts.afterGoodLogin,o.loggedUser);return m&&h.Z.goto(m),o}else{this.loggedUser=null,this.cookie.removeAll();const o=!!r.res.content&&(r.res.content.message||r.res.content.msg)?r.res.content.message||r.res.content.msg:"Bad Login";throw new Error(o)}}async logout(e){this.cookie.removeAll(),this.loggedUser=void 0,await new Promise(r=>setTimeout(r,e));const t=this._correctURL(this.authOpts.afterLogout,null);t&&h.Z.goto(t)}getLoggedUserInfo(){return this.loggedUser||this.cookie.getObject("auth_loggedUser")}setLoggedUserInfo(e){this.loggedUser=e,this.cookie.putObject("auth_loggedUser",e)}getJWTtoken(){return this.jwtToken||this.cookie.get("auth_jwtToken")}autoLogin(){const e=this.getLoggedUserInfo();if(!!e&&!!e.username){const t=this._correctURL(this.authOpts.afterGoodLogin,e);t&&h.Z.goto(t),console.log(`%c AuthWarn:: Autologin to ${t} is triggered.`,"color:Maroon; background:LightYellow")}}isLogged(){const e=this.getLoggedUserInfo();if(!(!!e&&!!e.username)){const r=this._correctURL(this.authOpts.afterBadLogin,e);throw r&&h.Z.goto(r),new Error("AuthWarn:: This route is blocked because the user is not logged in.")}}hasRole(){const e=this.getLoggedUserInfo(),t=window.location.pathname+window.location.search;let r=!1;if(!!e&&!!e.role&&(r=t.indexOf(e.role)!==-1),!r){const o=this._correctURL(this.authOpts.afterBadLogin,e);throw o&&h.Z.goto(o),new Error("AuthWarn:: This route is blocked because the user doesn't have valid role.")}}_correctURL(e,t){let r;return!!t&&!!t.role?r=e?e.replace("{loggedUserRole}",t.role):"":r=e||"",r}}T(w,"Auth");const $=w;var O=__webpack_require__(632);class L{constructor(e){this.formName=e,this.debugOptions={setControl:!1,setControls:!1,getControl:!1,getControls:!1,delControl:!1,delControls:!1}}setControl(e,t){this._debug("setControl",`--------- setControl("${e}", "${t}") ------`,"green","#A1F8DC");const r=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name="${e}"]`);if(!r.length){console.log(`%c FormWarn:: Form "${this.formName}" doesn't have control with name="${e}" attribute.`,"color:Maroon; background:LightYellow");return}for(const o of r){if(o.type==="text")typeof t=="object"&&(t=JSON.stringify(t)),o.value=t,o.setAttribute("value",t);else if(o.type==="number")t===""?t=0:typeof t=="string"&&(t=+t),o.value=t,o.setAttribute("value",t);else if(o.type==="checkbox")o.checked=!1,typeof t!="boolean"&&t.indexOf(o.value)!==-1?o.checked=!0:typeof t=="boolean"&&(o.checked=t);else if(o.type==="radio")o.checked=!1,t===o.value&&(o.checked=!0);else if(o.type==="select-multiple"){const m=o;for(const _ of m)_.selected=!1,t.indexOf(_.value)!==-1&&(_.selected=!0)}else o.type==="textarea"&&typeof t=="object"&&(t=JSON.stringify(t,null,2)),o.value=t;this._debug("setControl",`${o.type}[name="${e}"] got value="${t}"`,"green")}}setControls(e){if(this._debug("setControls","--------- setControls ------","green","#88DBC0"),!e)return;const t=Object.keys(e);for(const r of t){const o=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name^="${r}"]`);if(this._debug("setControls",`
Elems found: ${o.length} in the form for name^="${r}".`,"green"),!o.length){this._debug("setControls",`FormWarn::setControls -> Form "${this.formName}" doesn't have control with name^="${r}" attribute.`,"green");continue}for(const m of o){let _,E;if(m){E=m.getAttribute("name");const A=E.split("."),R=A[0],F=A[1];R&&!F?_=e[R]:R&&F&&(_=e[R][F])}E&&this.setControl(E,_),this._debug().setControls&&console.log(`setControls:: obj-key:: ${r} , attrVal:: ${E} , elem::`,m)}}}getControl(e,t=!0){this._debug("getControl","--------- getControl ------","green","#A1F8DC");const r=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name="${e}"]`);r.length||console.error(`Form "${this.formName}" doesn't have name="${e}" control.`);let o;const m=[];let _=1;for(const E of r){if(E.type==="checkbox"){let A=E.value;t&&(A=this._typeConvertor(E.value)),E.checked&&(m.push(A),o=m),_===r.length&&!o&&(o=[])}else if(E.type==="select-multiple"){const A=E.selectedOptions;for(const R of A){let F=R.value;t&&(F=this._typeConvertor(R.value)),m.push(F),o=m}_===r.length&&!o&&(o=[])}else if(E.type==="radio"){let A=E.value;t&&(A=this._typeConvertor(E.value)),E.checked&&(o=A)}else if(E.type==="number")o=E.valueAsNumber;else if(E.type==="password")o=E.value;else if(E.type==="file"&&E.multiple)o=E.files;else if(E.type==="file")o=E.files[0];else{let A=E.value;t&&(A=this._typeConvertor(E.value)),o=A}_++}return this._debug("getControl",`${o}`,"green"),o}getControls(e,t=!0){e||console.error('getControlsErr: Argument "keys" is not defined. It should be an array.'),this._debug("getControls","--------- getControls ------","green","#A1F8DC"),this._debug("getControls",e,"green");const r={};for(const o of e)r[o]=this.getControl(o,t);return r}delControl(e){this._debug("delControl","--------- delControl ------","green","#A1F8DC"),this._debug("delControl",e,"green");const t=document.querySelectorAll(`[data-rg-form="${this.formName}"] [name^="${e}"]`);t.length||console.error(`Form "${this.formName}" doesn't have name^="${e}" control.`);for(const r of t)if(r.type==="checkbox")r.checked=!1;else if(r.type==="select-multiple"){const o=r;for(const m of o)m.selected=!1}else r.type==="radio"?r.checked=!1:r.value=""}delControls(e){e||console.error('delControlsErr: Argument "keys" is not defined. It should be an array.'),this._debug("delControls","--------- delControls ------","green","#A1F8DC"),this._debug("delControls",e,"green");for(const t of e)this.delControl(t)}_typeConvertor(e){function t(r){try{JSON.parse(r)}catch{return!1}return!0}return T(t,"isJSON"),!!e&&!isNaN(e)&&!/\./.test(e)?e=parseInt(e,10):!!e&&!isNaN(e)&&/\./.test(e)?e=parseFloat(e):(e==="true"||e==="false"||t(e))&&(e=JSON.parse(e)),e}_debug(e,t,r,o){return this.debugOptions[e]&&console.log(`%c ${t}`,`color: ${r}; background: ${o}`),this.debugOptions}}T(L,"Form");const x=L;class M{constructor(e,t){this.linksSize=+e||5,this.currentPageClasses=t||["active"]}async page(e,t,r){e=+e;const o=Math.ceil(t/r),m=Math.ceil(this.linksSize/2);let _,E;o>=this.linksSize?e>=1&&e<this.linksSize?(_=1,E=this.linksSize):e>=this.linksSize&&e<=o-m?(_=e-m,E=e+m):(_=o-this.linksSize+1,E=o):(_=1,E=o);let A;const R=[];for(A=_;A<=E;A++){const F=A===e?this.currentPageClasses:[],P={i:A,c:F};R.push(P)}return{pageLinks:R,pagesTotal:o}}skipCalc(e,t){return(e-1)*t}ordCalc(e,t,r){return(e-1)*t+r+1}}T(M,"Paginator");const B=M;class V{sleep(e){return new Promise(t=>setTimeout(t,e))}}T(V,"Util");const q=new V;window.regochWeber.sys={App:g,Controller:k,syslib:s}})()})();

//# sourceMappingURL=index.min.js.map